<!DOCTYPE html>
<html lang="en">
<head>
<title>Map-enabled interaction of spatial data with semantic information</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	  <link rel="stylesheet" href="Leaflet.GraphicScale.min.css" />
  
	<!-- Load Leaflet -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet-src.js" crossorigin=""></script>
	 <script src="Leaflet.GraphicScale.min.js"></script>
<link rel = "stylesheet" href = "L.Control.Layers.Tree.css" />
	 
     <script src="L.Control.Layers.Tree.js"></script> 
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type="text/css">
        .node {font-family: Arial;}

        .link { stroke: #999; stroke-opacity: .6; stroke-width: 1px; }
	#mapid {

width: 65%;
min-width: 900px;
min-height:20%;
height:auto;
position:absolute;
top:0px;
float:left;


bottom:0px;
margin-left:0px;
margin-top:0px;
background-color:#99ccff;
border: 2px black;
z-index:100;

}	
/ Firefox 4 to 15
width: -moz-calc(100% - 100px);

// Chrome 19 to 25
// Safari 6
width: -webkit-calc(100% - 100px);



@media (min-width: 601px) {
  .map{
    min-width: 600px;
  }
}

@media (max-width: 600px) {
 .map{
    min-width: 400px;
  }
}	
@media screen and (min-width: 480px) { 
#container321
{
min-width: 900px;
min-height:20%;
height:auto;
position:absolute;
top:0px;

width: 35%;
  left: 70%;
bottom:0px;
margin-left:0px;
margin-top:0px;

border: 2px black;
z-index:100;
}
}
@media screen and (min-width: 480px) { 
#container323
{
min-width: 900px;
min-height:20%;
height:auto;
position:absolute;
top:0px;
width: 35%;
  left: 70%;;

bottom:0px;
margin-left:0px;
margin-top:0px;

border: 2px black;
z-index:100;

}
}
@media screen and (min-width: 480px) { 
#container1
{
min-width: 900px;
min-height:20%;
height:auto;
position:absolute;
top:0px;
width: 35%;
  left: 70%;

bottom:0px;
margin-left:0px;
margin-top:0px;

border: 2px black;
z-index:100;

}
}
@media screen and (min-width: 480px) { 
#container112
{
min-width: 900px;
min-height:20%;
height:auto;
position:absolute;
top:0px;
width: 35%;
  left: 70%;

bottom:0px;
margin-left:0px;
margin-top:0px;

border: 2px black;
z-index:100;
}
}
@media screen and (min-width: 480px) { 
#container131
{
min-width: 900px;
min-height:20%;
height:auto;
position:absolute;
top:0px;

width: 35%;
  left: 70%;

bottom:0px;
margin-left:0px;
margin-top:0px;

border: 2px black;
z-index:100;

}
}
@media screen and (min-width: 480px) { 
#container211
{
min-width: 900px;
min-height:20%;
height:auto;
position:absolute;
top:0px;

width: 35%;
  left: 70%;

bottom:0px;
margin-left:0px;
margin-top:0px;

border: 2px black;
z-index:100;

}
}
@media screen and (min-width: 480px) { 
#container222
{
min-width: 900px;
min-height:20%;
height:auto;
position:absolute;
top:0px;
width: 35%;
  left: 70%;

bottom:0px;
margin-left:0px;
margin-top:0px;

border: 2px black;
z-index:100;

}
}
@media screen and (min-width: 480px) { 
#container242
{
min-width: 900px;
min-height:20%;
height:auto;
position:absolute;
top:0px;
width: 35%;
  left: 70%;

bottom:0px;
margin-left:0px;
margin-top:0px;

border: 2px black;
z-index:100;

}
}
@media screen and (min-width: 480px) { 
#container243
{
min-width: 900px;
min-height:20%;
height:auto;
position:absolute;
top:0px;
width: 35%;
  left: 70%;

bottom:0px;
margin-left:0px;
margin-top:0px;

border: 2px black;
z-index:100;

}
}
@media screen and (min-width: 480px) { 
#container334
{
min-width: 900px;
min-height:20%;
height:auto;
position:absolute;
top:0px;
width: 35%;
  left: 70%;
bottom:0px;
margin-left:0px;
margin-top:0px;

border: 2px black;
z-index:100;

}
}
@media screen and (min-width: 480px) { 
#container324
{
min-width: 900px;
min-height:20%;
height:auto;
position:absolute;
top:0px;
width: 35%;
  left: 70%;

bottom:0px;
margin-left:0px;
margin-top:0px;

border: 2px black;
z-index:100;

}
}
	@media screen and (min-width: 480px) { 
  div.tooltip {   
      position: absolute;           
      text-align: center;           
      width: 136px;                  
      height: 50px;                 
      padding: 2px;             
      font: 12px sans-serif;          
      border: 0px;      
      border-radius: 8px;           
      pointer-events: none;
      border: 1px;         
    }
}
@media screen and (min-width: 480px) { 
  div.tooltip > h3 {
    background: lightsteelblue;
    margin-bottom: 0px;
    margin-top: 0px;
    height: 30px;
    font-size: 22px;
  }
  
  div.tooltip > p {
    background: white; 
    margin-top: 0px;
    height: 16px;
  }
  
  a:link, a:visited {
text-decoration: none;
  color: black;

}
}
@media screen and (min-width: 480px) { 
.legend {
  position: absolute;
  right: 50%;
  top: 65%;
}
}
@media screen and (min-width: 480px) { 
 p.my-paragraph-style {
 position: absolute;
 top: 80%;


 }
 }
    </style>
</head>

<body onload="init ();">

<div id="mapid"></div>
<div id="container321" style="text-align:left;  padding: 2px; font-family: Arial; font-size: 10;">


<p><b>Graph view of Semantic Information</b></p>
<svg width="560" height="540"  ></svg>
<p  class="my-paragraph-style"> This web mapping application supports the linking and interaction <br> between spatial and semantic information.<br> Please select a spatial feature on the left to explore relevant<br> semantic information from  the Environment Ontology (EnvO).<br> EnvO is a community ontology for the concise, controlled description<br> of environments, CC BY 3.0, <a style="text-decoration: underline" href=" http://environmentontology.org" target="_blank">http://environmentontology.org </a> </p>

</div>
<div id="container1" style="text-align:left;  padding: 2px; font-family: Arial; font-size: 10;">
<p><b>Graph view of Semantic Information</b></p>
<svg width="560" height="540"  ></svg>

<p  class="my-paragraph-style"> This web mapping application supports the linking and interaction <br> between spatial and semantic information.<br> Please select a spatial feature on the left to explore relevant<br> semantic information from  the Environment Ontology (EnvO).<br> EnvO is a community ontology for the concise, controlled description<br> of environments, CC BY 3.0, <a style="text-decoration: underline" href=" http://environmentontology.org" target="_blank">http://environmentontology.org </a> </p>

</div>

<div id="container112" style="text-align:left;  padding: 2px; font-family: Arial; font-size: 10;">
<p><b>Graph view of Semantic Information</b></p>
<svg width="560" height="540"  ></svg>
<p  class="my-paragraph-style"> This web mapping application supports the linking and interaction <br> between spatial and semantic information.<br> Please select a spatial feature on the left to explore relevant<br> semantic information from  the Environment Ontology (EnvO).<br> EnvO is a community ontology for the concise, controlled description<br> of environments, CC BY 3.0, <a style="text-decoration: underline" href=" http://environmentontology.org" target="_blank">http://environmentontology.org </a> </p>

</div>
<div id="container131" style="text-align:left;  padding: 2px; font-family: Arial; font-size: 10;">
<p><b>Graph view of Semantic Information</b></p>
<svg width="560" height="540"  ></svg>
<p  class="my-paragraph-style"> This web mapping application supports the linking and interaction <br> between spatial and semantic information.<br> Please select a spatial feature on the left to explore relevant<br> semantic information from  the Environment Ontology (EnvO).<br> EnvO is a community ontology for the concise, controlled description<br> of environments, CC BY 3.0, <a style="text-decoration: underline" href=" http://environmentontology.org" target="_blank">http://environmentontology.org </a> </p>

</div>
<div id="container211" style="text-align:left;  padding: 2px; font-family: Arial; font-size: 10;">
<p><b>Graph view of Semantic Information</b></p>
<svg width="560" height="540"  ></svg>
<p  class="my-paragraph-style"> This web mapping application supports the linking and interaction <br> between spatial and semantic information.<br> Please select a spatial feature on the left to explore relevant<br> semantic information from  the Environment Ontology (EnvO).<br> EnvO is a community ontology for the concise, controlled description<br> of environments, CC BY 3.0, <a style="text-decoration: underline" href=" http://environmentontology.org" target="_blank">http://environmentontology.org </a> </p>

</div>
<div id="container222" style="text-align:left;  padding: 2px; font-family: Arial; font-size: 10;">
<p><b>Graph view of Semantic Information</b></p>
<svg width="560" height="540"  ></svg>
<p  class="my-paragraph-style"> This web mapping application supports the linking and interaction <br> between spatial and semantic information.<br> Please select a spatial feature on the left to explore relevant<br> semantic information from  the Environment Ontology (EnvO).<br> EnvO is a community ontology for the concise, controlled description<br> of environments, CC BY 3.0, <a style="text-decoration: underline" href=" http://environmentontology.org" target="_blank">http://environmentontology.org </a> </p>

</div>
<div id="container242" style="text-align:left;  padding: 2px; font-family: Arial; font-size: 10;">
<p><b>Graph view of Semantic Information</b></p>
<svg width="560" height="540"  ></svg>
<p  class="my-paragraph-style"> This web mapping application supports the linking and interaction <br> between spatial and semantic information.<br> Please select a spatial feature on the left to explore relevant<br> semantic information from  the Environment Ontology (EnvO).<br> EnvO is a community ontology for the concise, controlled description<br> of environments, CC BY 3.0, <a style="text-decoration: underline" href=" http://environmentontology.org" target="_blank">http://environmentontology.org </a> </p>

</div>
<div id="container334" style="text-align:left;  padding: 2px; font-family: Arial; font-size: 10;">
<p><b>Graph view of Semantic Information</b></p>
<svg width="560" height="540"  ></svg>
<p  class="my-paragraph-style"> This web mapping application supports the linking and interaction <br> between spatial and semantic information.<br> Please select a spatial feature on the left to explore relevant<br> semantic information from  the Environment Ontology (EnvO).<br> EnvO is a community ontology for the concise, controlled description<br> of environments, CC BY 3.0, <a style="text-decoration: underline" href=" http://environmentontology.org" target="_blank">http://environmentontology.org </a> </p>

</div>
<div id="container324" style="text-align:left;  padding: 2px; font-family: Arial; font-size: 10;">
<p><b>Graph view of Semantic Information</b></p>
<svg width="560" height="540"  ></svg>
<p  class="my-paragraph-style"> This web mapping application supports the linking and interaction <br> between spatial and semantic information.<br> Please select a spatial feature on the left to explore relevant<br> semantic information from  the Environment Ontology (EnvO).<br> EnvO is a community ontology for the concise, controlled description<br> of environments, CC BY 3.0, <a style="text-decoration: underline" href=" http://environmentontology.org" target="_blank">http://environmentontology.org </a> </p>

</div>
<div id="container243" style="text-align:left;  padding: 2px; font-family: Arial; font-size: 10;">
<p><b>Graph view of Semantic Information</b></p>
<svg width="560" height="540"  ></svg>
<p  class="my-paragraph-style"> This web mapping application supports the linking and interaction <br> between spatial and semantic information.<br> Please select a spatial feature on the left to explore relevant<br> semantic information from  the Environment Ontology (EnvO).<br> EnvO is a community ontology for the concise, controlled description<br> of environments, CC BY 3.0, <a style="text-decoration: underline" href=" http://environmentontology.org" target="_blank">http://environmentontology.org </a> </p>

</div>
<div id="container323" style="text-align:left;  padding: 2px; font-family: Arial; font-size: 10;">
<p><b>Graph view of Semantic Information</b></p>
<svg width="560" height="540"  ></svg>
<p  class="my-paragraph-style"> This web mapping application supports the linking and interaction <br> between spatial and semantic information.<br> Please select a spatial feature on the left to explore relevant<br> semantic information from  the Environment Ontology (EnvO).<br> EnvO is a community ontology for the concise, controlled description<br> of environments, CC BY 3.0, <a style="text-decoration: underline" href=" http://environmentontology.org" target="_blank">http://environmentontology.org </a> </p>

</div>

<script src="landuse2.js"></script>
<script src="hydro_final.js"></script>
<script src="https://d3js.org/d3.v4.min.js" type="text/javascript"></script>
<script src="https://d3js.org/d3-selection-multi.v1.js"></script>


<script type="text/javascript">

function openPage(pageName, elmnt) {
               
                // Add the specific color to the button used to open the tab content
                elmnt.style.backgroundColor = "#ffffff";
                setTimeout(function(){
				
				mymap.invalidateSize();
               
                },0);
            }
// Initialize the map
// map options
var centerLat = 37.85965671995;
var centerLng = 24.8429740239;		
var initialZoom = 10;

var mymap = L.map('mapid',{
continuousWorld: false,
center: [centerLat, centerLng],
zoom: initialZoom,
maxZoom:14,
});

// Add a tile to the map = a background. Comes from OpenStreetmap
var osm = L.tileLayer(
    'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a>',
    
    }).addTo(mymap);

 var graphicScale1 = L.control.graphicScale({
		doubleLine: false,
		fill: 'fill',
        showSubunits: false
	}).addTo(mymap);

// function for the color of landuse geojson
		
		function getColor(x) {
		
        if (x == 112) {
            return "#ff0000";
        } else if (x == 131) {
            return "#9900cc";
        } else if (x == 222) {
            return "#ff9966";
		} else if (x == 324) {
            return "#336600";	
		} else if (x == 334) {
            return "#000000";
		} else if (x == 243) {
            return "#e6cc4d";
		} else if (x == 211) {
            return "#ffffb2";
		} else if (x == 323) {
            return "#66FF00";
		} else if (x == 321) {
            return "#ccf24d";
		} else if (x == 242) {
            return "#FFFF00";
        } 
		else {
            return "yellow";
        }
    };
function myStyle(feature) {
  return {
    fillColor: getColor(feature.properties.ΚΩΔΙΚ),
    weight: 1,
	fillOpacity: 1,
    color: '#000000',  //Outline color
    opacity: 0.7,
  };
}

// Define the landuse GeoJSON layer

var landusegeo1 = L.geoJson(landuse, {
     
	   filter: pasture,
        style: myStyle,
		onEachFeature: function (feature, layer) {
	// δημιουργια pop up πληροφοριας 
		var popupContent = "<p> Type: <b>"+ feature.properties.Name +"</b> </p>"	;
            if (feature.properties && feature.properties.popupContent) {
				popupContent += feature.properties.popupContent;
			}
			layer.bindPopup(popupContent);
			

 },
		
});
landusegeo1.id = 'ena';

function pasture(feature) {
  if (feature.properties.ΚΩΔΙΚ === 321) return true
}

var landusegeo2 = L.geoJson(landuse, {
     
	   filter: scrub,
        style: myStyle,
		onEachFeature: function (feature, layer) {
	// δημιουργια pop up πληροφοριας 
		var popupContent = "<p> Type: <b>"+ feature.properties.Name +"</b> </p>"	;
            if (feature.properties && feature.properties.popupContent) {
				popupContent += feature.properties.popupContent;
			}
			layer.bindPopup(popupContent);
			

 },
});

landusegeo2.id = 'duo';

function scrub(feature) {
  if (feature.properties.ΚΩΔΙΚ === 243) return true
}

var landusegeo3 = L.geoJson(landuse, {
     
	   filter: grassland,
        style: myStyle,
		onEachFeature: function (feature, layer) {
	// δημιουργια pop up πληροφοριας 
		var popupContent = "<p> Type: <b>"+ feature.properties.Name +"</b> </p>"	;
            if (feature.properties && feature.properties.popupContent) {
				popupContent += feature.properties.popupContent;
			}
			layer.bindPopup(popupContent);
			

 },
});

landusegeo3.id = 'tria';

function grassland(feature) {
  if (feature.properties.ΚΩΔΙΚ === 323) return true
}


var landusegeo4 = L.geoJson(landuse, {
     
	   filter: biome,
        style: myStyle,
		onEachFeature: function (feature, layer) {
	// δημιουργια pop up πληροφοριας 
		var popupContent = "<p> Type: <b>"+ feature.properties.Name +"</b> </p>"	;
            if (feature.properties && feature.properties.popupContent) {
				popupContent += feature.properties.popupContent;
			}
			layer.bindPopup(popupContent);
			

 },
});

landusegeo4.id = 'tesera';

function biome(feature) {
  if (feature.properties.ΚΩΔΙΚ === 324) return true
}

var landusegeo5 = L.geoJson(landuse, {
     
	   filter: burn,
        style: myStyle,
		onEachFeature: function (feature, layer) {
	// δημιουργια pop up πληροφοριας 
		var popupContent = "<p> Type: <b>"+ feature.properties.Name +"</b> </p>"	;
            if (feature.properties && feature.properties.popupContent) {
				popupContent += feature.properties.popupContent;
			}
			layer.bindPopup(popupContent);
			

 },
});

landusegeo5.id = 'pente';

function burn(feature) {
  if (feature.properties.ΚΩΔΙΚ === 334) return true
}

var landusegeo6 = L.geoJson(landuse, {
     
	   filter: urban,
        style: myStyle,
		onEachFeature: function (feature, layer) {
	// δημιουργια pop up πληροφοριας 
		var popupContent = "<p> Type: <b>"+ feature.properties.Name +"</b> </p>"	;
            if (feature.properties && feature.properties.popupContent) {
				popupContent += feature.properties.popupContent;
			}
			layer.bindPopup(popupContent);
			

 },
});

landusegeo6.id = 'exi';

function urban(feature) {
  if (feature.properties.ΚΩΔΙΚ === 112) return true
}

var landusegeo7 = L.geoJson(landuse, {
     
	   filter: mine,
        style: myStyle,
		onEachFeature: function (feature, layer) {
	// δημιουργια pop up πληροφοριας 
		var popupContent = "<p> Type: <b>"+ feature.properties.Name +"</b> </p>"	;
            if (feature.properties && feature.properties.popupContent) {
				popupContent += feature.properties.popupContent;
			}
			layer.bindPopup(popupContent);
			

 },
});

landusegeo7.id = 'epta';

function mine(feature) {
  if (feature.properties.ΚΩΔΙΚ === 131) return true
}

var landusegeo8 = L.geoJson(landuse, {
     
	   filter: arable,
        style: myStyle,
		onEachFeature: function (feature, layer) {
	// δημιουργια pop up πληροφοριας 
		var popupContent = "<p> Type: <b>"+ feature.properties.Name +"</b> </p>"	;
            if (feature.properties && feature.properties.popupContent) {
				popupContent += feature.properties.popupContent;
			}
			layer.bindPopup(popupContent);
			

 },
});

landusegeo8.id = 'okto';

function arable(feature) {
  if (feature.properties.ΚΩΔΙΚ === 211) return true
}

var landusegeo9 = L.geoJson(landuse, {
     
	   filter: fruit,
        style: myStyle,
		onEachFeature: function (feature, layer) {
	// δημιουργια pop up πληροφοριας 
		var popupContent = "<p> Type: <b>"+ feature.properties.Name +"</b> </p>"	;
            if (feature.properties && feature.properties.popupContent) {
				popupContent += feature.properties.popupContent;
			}
			layer.bindPopup(popupContent);
			

 },
});

landusegeo9.id = 'enia';

function fruit(feature) {
  if (feature.properties.ΚΩΔΙΚ === 222) return true
}

var landusegeo10 = L.geoJson(landuse, {
     
	   filter: complex,
        style: myStyle,
		onEachFeature: function (feature, layer) {
	// δημιουργια pop up πληροφοριας 
		var popupContent = "<p> Type: <b>"+ feature.properties.Name +"</b> </p>"	;
            if (feature.properties && feature.properties.popupContent) {
				popupContent += feature.properties.popupContent;
			}
			layer.bindPopup(popupContent);
			

 },
});

landusegeo10.id = 'deka';

function complex(feature) {
  if (feature.properties.ΚΩΔΙΚ === 242) return true
}
var hydroStyle = {
    color: "#66ccff",
    weight: 2,
	stroke: 2,
    opacity: 1,
	//dashArray: 5,
};	

var highlight = {
		color: '#00fffb',
		weight: 5,
	};


	
var hydro = L.geoJSON(hydro_final, {
    style: hydroStyle,
	onEachFeature: function (feature, layer) {
	// δημιουργια pop up πληροφοριας 
		var popupContent = "<p> Name: <b>"+ feature.properties.Name +"</b> </p>"	;
            if (feature.properties && feature.properties.popupContent) {
				popupContent += feature.properties.popupContent;
			}
			layer.bindPopup(popupContent);

			
 },



});
hydro.id = 'river';

function landusegeo1click(e) {     

    var colors = d3.scaleOrdinal(d3.schemeCategory10);

    var svg = d3.select("#container").select("svg"),
        width = +svg.attr("width"),
        height = +svg.attr("height"),
        node,
        link;

    svg.append('defs').append('marker')
        .attrs({'id':'arrowhead',
            'viewBox':'-0 -5 10 10',
            'refX':13,
            'refY':0,
            'orient':'auto',
            'markerWidth':10,
            'markerHeight':	10,
            'xoverflow':'visible'})
        .append('svg:path')
        .attr('d', 'M 0,-5 L 10 ,0 L 0,5')
        .style('fill', "#999" );

    var simulation = d3.forceSimulation()
        .force("link", d3.forceLink().id(function (d) {return d.id;}).distance(100).strength(1))
        .force("charge", d3.forceManyBody())
        .force("center", d3.forceCenter(width / 2, height / 2));

var div = d3.select('body').append('div')   
    .attr('class', 'tooltip')               
    .style('opacity', 0);
	
	
    d3.json("graph2.json", function (error, graph) {
	
        if (error) throw error;
        update(graph.links, graph.nodes);
		
		
    });
	
	
	
	graph.links.forEach(function (d) {
    d.value = Math.floor(Math.random() * 6)
  });

    function update(links, nodes) {
        link = svg.selectAll(".link")
            .data(links)
            .enter()
            .append("line")
            .attr("class", "link")
            .attr('marker-end','url(#arrowhead)')
			.style("stroke-width","1")
      .style("stroke", function(d) { return colors(d.value); })

        link.append("title")
            .text(function (d) {return d.type;});

        edgepaths = svg.selectAll(".edgepath")
            .data(links)
            .enter()
            .append('path')
            .attrs({
                'class': 'edgepath',
                'fill-opacity': 0,
                'stroke-opacity': 0,
				
                'id': function (d, i) {return 'edgepath' + i}
            })
            .style("pointer-events", "none")
		
       ;

        edgelabels = svg.selectAll(".edgelabel")
            .data(links)
            .enter()
            .append('text')
			
            .style("fill", function(d) { return colors(d.value); })
            .attrs({
                'class': 'edgelabel',
                'id': function (d, i) {return 'edgelabel' + i},
                'font-size': 15,
				'font-family': "Arial",
               
            });

        edgelabels.append('textPath')
            .attr('xlink:href', function (d, i) {return '#edgepath' + i})
            .style("text-anchor", "middle")
            .style("pointer-events", "none")
            .attr("startOffset", "50%")
            .text(function (d) {return d.type});

        node = svg.selectAll(".node")
            .data(nodes)
            .enter()
            .append("g")
            .attr("class", "node")
            .call(d3.drag()
                    .on("start", dragstarted)
                    .on("drag", dragged)
                    //.on("end", dragended)
            )
			.on("click", click)
      .on("dblclick", dblclick)
	  
	  .on('mouseover', function(d) {      
        div.transition()        
            .duration(200)      
            .style('opacity', .9);      
			if (d.id == 1) 
        div.html('<h3>' + d.name + '</h3>' + '<p>' + "A stream which, through permanent or seasonal flow processes, moves from elevated land towards lower elevations through a definite channel and empties either into a sea, lake, or another river or ends on land as bed seepage and evapotranspiration exceed water supply." +  '</p>')  
            .style('left', (d3.event.pageX ) + 'px')     
            .style('top', (d3.event.pageY + 58) + 'px')
			else
			div.html('<p>' + d.name + '</p>' )  
            .style('left', (d3.event.pageX ) + 'px')     
            .style('top', (d3.event.pageY + 58) + 'px')

			
        
		})                  
    .on('mouseout', function(d) {       
        div.transition()        
            .duration(500)      
            .style('opacity', 0);   
    });

        node.append("circle")
            .attr("r", 7)
            .style("fill", function (d, i) {
			
			if (i>0) {return colors(d.value)}
			else { return '#66ccff'}
			})
			

        node.append("text")
            .attr("dy", -3)
            .text(function (d) {return d.name})
			.attr('font-size',  function(d, i) {
        if (i>0) { return '1.2em' }
        else { return '1.8em'}
    }
	)			;

        simulation
            .nodes(nodes)
            .on("tick", ticked);

        simulation.force("link")
            .links(links);
    }
	
	

    function ticked() {
        link
            .attr("x1", function (d) {return d.source.x;})
            .attr("y1", function (d) {return d.source.y;})
            .attr("x2", function (d) {return d.target.x;})
            .attr("y2", function (d) {return d.target.y;});

        node
            .attr("transform", function (d) {return "translate(" + d.x + ", " + d.y + ")";});

        edgepaths.attr('d', function (d) {
            return 'M ' + d.source.x + ' ' + d.source.y + ' L ' + d.target.x + ' ' + d.target.y;
        });

        edgelabels.attr('transform', function (d) {
            if (d.target.x < d.source.x) {
                var bbox = this.getBBox();

                rx = bbox.x + bbox.width / 2;
                ry = bbox.y + bbox.height / 2;
                return 'rotate(180 ' + rx + ' ' + ry + ')';
            }
            else {
                return 'rotate(0)';
            }
        });
    }

    function dragstarted(d) {
        if (!d3.event.active) simulation.alphaTarget(0.3).restart()
        d.fx = d.x;
        d.fy = d.y;
    }

    function dragged(d) {
        d.fx = d3.event.x;
        d.fy = d3.event.y;
    }
	
	
	// action to take on mouse click
function click() {
  d3.select(this).select("text").transition()
    .duration(750)
    .attr("x", 22)
    .style("stroke", "lightsteelblue")
    .style("stroke-width", ".5px")
    .style("font", "20px ");
  d3.select(this).select("circle").transition()
    .duration(750)
    .attr("r", 14);
}

// action to take on mouse double click
function dblclick() {
  d3.select(this).select("circle").transition()
    .duration(750)
    .attr("r", 6);
  d3.select(this).select("text").transition()
    .duration(750)
    .attr("x", 12)
    .style("stroke", "none")
    .style("fill", "black")
    .style("stroke", "none")
    .style("font", "15px ");
}


};

function hydroclick(e) {

     var colors = d3.scaleOrdinal(d3.schemeCategory10);

    var svg1 = d3.select("#container1").select("svg"),
        width = +svg1.attr("width"),
        height = +svg1.attr("height"),
        node,
        link;

    svg1.append('defs').append('marker')
        .attrs({'id':'arrowhead',
            'viewBox':'-0 -5 10 10',
            'refX':13,
            'refY':0,
            'orient':'auto',
            'markerWidth':10,
            'markerHeight':	10,
            'xoverflow':'visible'})
        .append('svg:path')
        .attr('d', 'M 0,-5 L 10 ,0 L 0,5')
        .style('fill', "#999" );

    var simulation1 = d3.forceSimulation()
        .force("link", d3.forceLink().id(function (d) {return d.id;}).distance(100).strength(1))
        .force("charge", d3.forceManyBody())
        .force("center", d3.forceCenter(width / 2, height / 2));

var div = d3.select('body').append('div')   
    .attr('class', 'tooltip')               
    .style('opacity', 0);
	
	
    d3.json("graph.json", function (error, graph) {
	
        if (error) throw error;
        update(graph.links, graph.nodes);
		
		
    });
	
	
	
	graph.links.forEach(function (d) {
    d.value = Math.floor(Math.random() * 6)
  });

    function update(links, nodes) {
        link = svg1.selectAll(".link")
            .data(links)
            .enter()
            .append("line")
            .attr("class", "link")
            .attr('marker-end','url(#arrowhead)')
			.style("stroke-width","1")
      .style("stroke", function(d) { return colors(d.value); })

        link.append("title")
            .text(function (d) {return d.type;});

        edgepaths = svg1.selectAll(".edgepath")
            .data(links)
            .enter()
            .append('path')
            .attrs({
                'class': 'edgepath',
                'fill-opacity': 0,
                'stroke-opacity': 0,
				
                'id': function (d, i) {return 'edgepath' + i}
            })
            .style("pointer-events", "none")
		
       ;

        edgelabels = svg1.selectAll(".edgelabel")
            .data(links)
            .enter()
            .append('text')
			
            .style("fill", function(d) { return colors(d.value); })
            .attrs({
                'class': 'edgelabel',
                'id': function (d, i) {return 'edgelabel' + i},
                'font-size': 15,
				'font-family': "Arial",
               
            });

        edgelabels.append('textPath')
            .attr('xlink:href', function (d, i) {return '#edgepath' + i})
            .style("text-anchor", "middle")
            .style("pointer-events", "none")
            .attr("startOffset", "50%")
            .text(function (d) {return d.type});

        node = svg1.selectAll(".node")
            .data(nodes)
            .enter()
            .append("g")
            .attr("class", "node")
            .call(d3.drag()
                    .on("start", dragstarted)
                    .on("drag", dragged)
                    //.on("end", dragended)
            )
			.on("click", click)
      .on("dblclick", dblclick)
	  
	  .on('mouseover', function(d) {      
        div.transition()        
            .duration(200)      
            .style('opacity', .9);      
			if (d.id == 1) 
        div.html('<h3>' + d.name + '</h3>' + '<p>' + "A stream which, through permanent or seasonal flow processes, moves from elevated land towards lower elevations through a definite channel and empties either into a sea, lake, or another river or ends on land as bed seepage and evapotranspiration exceed water supply." +  '</p>')  
            .style('left', (d3.event.pageX ) + 'px')     
            .style('top', (d3.event.pageY + 58) + 'px')
			else
			div.html('<p>' + d.name + '</p>' )  
            .style('left', (d3.event.pageX ) + 'px')     
            .style('top', (d3.event.pageY + 58) + 'px')

			
        
		})                  
    .on('mouseout', function(d) {       
        div.transition()        
            .duration(500)      
            .style('opacity', 0);   
    });

        node.append("circle")
            .attr("r", 7)
            .style("fill", function (d, i) {
			
			if (i>0) {return colors(d.value)}
			else { return '#66ccff'}
			})
			

        node.append("text")
            .attr("dy", -3)
            .text(function (d) {return d.name})
			.attr('font-size',  function(d, i) {
        if (i>0) { return '1.2em' }
        else { return '1.8em'}
    }
	)			;

        simulation1
            .nodes(nodes)
            .on("tick", ticked);

        simulation1.force("link")
            .links(links);
    }
	
	

    function ticked() {
        link
            .attr("x1", function (d) {return d.source.x;})
            .attr("y1", function (d) {return d.source.y;})
            .attr("x2", function (d) {return d.target.x;})
            .attr("y2", function (d) {return d.target.y;});

        node
            .attr("transform", function (d) {return "translate(" + d.x + ", " + d.y + ")";});

        edgepaths.attr('d', function (d) {
            return 'M ' + d.source.x + ' ' + d.source.y + ' L ' + d.target.x + ' ' + d.target.y;
        });

        edgelabels.attr('transform', function (d) {
            if (d.target.x < d.source.x) {
                var bbox = this.getBBox();

                rx = bbox.x + bbox.width / 2;
                ry = bbox.y + bbox.height / 2;
                return 'rotate(180 ' + rx + ' ' + ry + ')';
            }
            else {
                return 'rotate(0)';
            }
        });
    }

    function dragstarted(d) {
        if (!d3.event.active) simulation1.alphaTarget(0.3).restart()
        d.fx = d.x;
        d.fy = d.y;
    }

    function dragged(d) {
        d.fx = d3.event.x;
        d.fy = d3.event.y;
    }
	
	
	// action to take on mouse click
function click() {
  d3.select(this).select("text").transition()
    .duration(750)
    .attr("x", 22)
    .style("stroke", "lightsteelblue")
    .style("stroke-width", ".5px")
    .style("font", "20px ");
  d3.select(this).select("circle").transition()
    .duration(750)
    .attr("r", 14);
}

// action to take on mouse double click
function dblclick() {
  d3.select(this).select("circle").transition()
    .duration(750)
    .attr("r", 6);
  d3.select(this).select("text").transition()
    .duration(750)
    .attr("x", 12)
    .style("stroke", "none")
    .style("fill", "black")
    .style("stroke", "none")
    .style("font", "15px ");
}


};


var cities = L.featureGroup([hydro,  landusegeo1, landusegeo2,  landusegeo3, landusegeo4, landusegeo5, landusegeo6, landusegeo7, landusegeo8, landusegeo9, landusegeo10]);

cities.eachLayer(function(layer) {
  layer.on('click', function(){
	  if (layer.id === 'river') {
   document.getElementById('container1').style.display ='block';
   document.getElementById('container323').style.display ='none';
   document.getElementById('container243').style.display ='none';
   document.getElementById('container222').style.display ='none';
   document.getElementById('container242').style.display ='none';
   document.getElementById('container324').style.display ='none';
   document.getElementById('container334').style.display ='none';
   document.getElementById('container131').style.display ='none';
   document.getElementById('container321').style.display ='none';
   document.getElementById('container112').style.display ='none';
   document.getElementById('container211').style.display ='none';
   
   
   
 var colors = d3.scaleOrdinal(d3.schemeCategory10);
 
 
    var svg1 = d3.select("#container1").select("svg"),
        width = +svg1.attr("width"),
        height = +svg1.attr("height"),
        node,
        link,
		edgepaths,
		edgelabels;

    svg1.append('defs').append('marker')
        .attrs({'id':'arrowhead',
            'viewBox':'-0 -5 10 10',
            'refX':13,
            'refY':0,
            'orient':'auto',
            'markerWidth':13,
            'markerHeight':	13,
            'xoverflow':'visible'})
        .append('svg:path')
        .attr('d', 'M 0,-5 L 10 ,0 L 0,5')
        .attr('fill', "#999" )
		.style('stroke', 'none');

    var simulation1 = d3.forceSimulation()
        .force("link", d3.forceLink().id(function (d) {return d.id;}).distance(100).strength(1))
        .force("charge", d3.forceManyBody())
        .force("center", d3.forceCenter(width / 2, height / 2))
		 .alphaDecay(0);
		
		
	


var div = d3.select('body').append('div')   
    .attr('class', 'tooltip')               
    .style('opacity', 0);
	
	
    d3.json("graph.json", function (error, graph) {
	     if (error) throw error;
        
        update(graph.links, graph.nodes);
		
		
    });
	 
	 
	update(graph.links, graph.nodes);
setTimeout(function(){force.alpha(0.1);},1000);


    function update(links, nodes) {
        link = svg1.selectAll(".link")
            .data(links)
            .enter()
            .append("line")
            .attr("class", "link")
            .attr('marker-end','url(#arrowhead)')
			.style("stroke-width","1")
      .style("stroke", function(d) { 
	  
	  return colors(d.value); 
	
	  } )


	
        link.append("title")
            .text(function (d) {return d.type;});

        edgepaths = svg1.selectAll(".edgepath")
            .data(links)
            .enter()
            .append('path')
            .attrs({
                'class': 'edgepath',
                'fill-opacity': 0,
                'stroke-opacity': 0,
				
                'id': function (d, i) {return 'edgepath' + i}
            })
            .style("pointer-events", "none")
		
       ;

        edgelabels = svg1.selectAll(".edgelabel")
            .data(links)
            .enter()
            .append('text')
			
            .style("fill", function(d) { return colors(d.value); })
            .attrs({
                'class': 'edgelabel',
                'id': function (d, i) {return 'edgelabel' + i},
                'font-size': 15,
				'font-family': "Arial",
               
            });

        edgelabels.append('textPath')
            .attr('xlink:href', function (d, i) {return '#edgepath' + i})
            .style("text-anchor", "middle")
            .style("pointer-events", "none")
            .attr("startOffset", "50%")
           ;


var data = [{"label":"is a", "value":194},
        {"label":"adjacent to", "value":567},
        {"label":"continuous with", "value":1314},
        {"label":"location of", "value":793},
        {"label":"has part", "value":1929},
        {"label":"part of", "value":1383}];

 //var legend = svg1.selectAll('.legend') 
    //    .data(colors.domain())                                   // NEW
    //      .enter()                                                // NEW
    //      .append('g')                                            // NEW
    //      .attr('class', 'legend')   
   //    .attr("width", 140)
  //  .attr("height", 400)
  //  .attr("transform", function(d, i) {
  //    return "translate(0," + i * 20 + ")";
 //   });
//	 legend.append('rect')                                     // NEW
 //         .attr('width', 18)                          // NEW
 //         .attr('height', 2)                         // NEW
//          .style('fill', colors)                                   // NEW
//          .style('stroke', colors); 
//
	
	//legend.append('text') 
   //       .data(data) 	// NEW
   //       .attr('x', 24)              // NEW
   //       .attr('y', 12)              // NEW
   //       .text(function(d) { return d.label; }); 
  
  var legend = d3.select("#container1").append("svg")
    .attr("class", "legend")
    .attr("width", 140)
    .attr("height", 400)
    .selectAll("g")
	.data(colors.domain()) 
    .enter()
    .append("g")
    .attr("transform", function(d, i) {
      return "translate(0," + i * 20 + ")";
    });
  legend.append("rect")
 
    .attr("width", 18)
    .attr("height", 2)
    .style('fill', colors)                                   // NEW
    .style('stroke', colors); 
	
	
  legend.append("text")
    .data(data)
    .attr("x", 24)
    .attr("y", 12)
   
    .text(function(d) {
       {return d.label;}
    });
		

        node = svg1.selectAll(".node")
            .data(nodes)
            .enter()
            .append("g")
            .attr("class", "node")
            .call(d3.drag()
                    .on("start", dragstarted)
                    .on("drag", dragged)
                    //.on("end", dragended)
            )
			.on("tick", ticked)
			.on("click", click)
      .on("dblclick", dblclick)
	  
	  .on('mouseover', function(d) {      
        div.transition()        
            .duration(200)      
            .style('opacity', .9);      
			if (d.id == 1) 
        div.html('<h3>' + d.name + '</h3>' + '<p>' + "A stream which, through permanent or seasonal flow processes, moves from elevated land towards lower elevations through a definite channel and empties either into a sea, lake, or another river or ends on land as bed seepage and evapotranspiration exceed water supply." +  '</p>')  
            .style('left', (d3.event.pageX ) + 'px')     
            .style('top', (d3.event.pageY + 58) + 'px')
			else
			div.html('<p>' + d.name + '</p>' )  
            .style('left', (d3.event.pageX ) + 'px')     
            .style('top', (d3.event.pageY + 58) + 'px')

			
        
		})                  
    .on('mouseout', function(d) {       
        div.transition()        
            .duration(500)      
            .style('opacity', 0);   
    });

        node.append("circle")
            .attr("r", 7)
            .style("fill", function (d, i) {
			
			if (i>0) {return colors(d.value)}
			else { return '#66ccff'}
			})
			

        node.append("text")
            .attr("dy", -3)
            .text(function (d) {return d.name})
			.attr('font-size',  function(d, i) {
        if (i>0) { return '1.2em' }
        else { return '1.8em'}
    }
	)			;

        simulation1
            .nodes(nodes)
            .on("tick", ticked);

        simulation1.force("link")
            .links(links);
    }
	
	
	


    function ticked() {
        link
            .attr("x1", function (d) {return d.source.x;})
            .attr("y1", function (d) {return d.source.y;})
            .attr("x2", function (d) {return d.target.x;})
            .attr("y2", function (d) {return d.target.y;});

        node
            .attr("transform", function (d) {return "translate(" + d.x + ", " + d.y + ")";});

        edgepaths.attr('d', function (d) {
            return 'M ' + d.source.x + ' ' + d.source.y + ' L ' + d.target.x + ' ' + d.target.y;
        });

        edgelabels.attr('transform', function (d) {
		 return "translate(" + d.x + "," + d.y + ")";
            
        });
    }
	


    function dragstarted(d) {
	
        if (!d3.event.active) simulation1.alphaTarget(0.3).restart()
        d.fx = d.x;
        d.fy = d.y;
    }

    function dragged(d) {

        d.fx = d3.event.x;
        d.fy = d3.event.y;
		ticked();
    }
	
	
	// action to take on mouse click
function click() {
  d3.select(this).select("text").transition()
    .duration(750)
    .attr("x", 22)
    .style("stroke", "lightsteelblue")
    .style("stroke-width", ".5px")
    .style("font", "20px ");
  d3.select(this).select("circle").transition()
    .duration(750)
    .attr("r", 14);
}

// action to take on mouse double click
function dblclick() {
  d3.select(this).select("circle").transition()
    .duration(750)
    .attr("r", 6);
  d3.select(this).select("text").transition()
    .duration(750)
    .attr("x", 12)
    .style("stroke", "none")
    .style("fill", "black")
    .style("stroke", "none")
    .style("font", "15px ");
}



	  }
	  else if (layer.id === 'ena') {
	  
	  document.getElementById('container321').style.display ='block';
	  document.getElementById('container323').style.display ='none';
	  document.getElementById('container243').style.display ='none';
	  document.getElementById('container222').style.display ='none';
	  document.getElementById('container242').style.display ='none';
	  document.getElementById('container324').style.display ='none';
	  document.getElementById('container334').style.display ='none';
	  document.getElementById('container211').style.display ='none';
	  document.getElementById('container131').style.display ='none';
	  document.getElementById('container112').style.display ='none';
	   document.getElementById('container1').style.display ='none';
	  var colors = d3.scaleOrdinal(d3.schemeCategory10);

    var svg321 = d3.select("#container321").select("svg"),
        width = +svg321.attr("width"),
        height = +svg321.attr("height"),
        node,
        link;

    svg321.append('defs').append('marker')
        .attrs({'id':'arrowhead',
            'viewBox':'-0 -5 10 10',
            'refX':13,
            'refY':0,
            'orient':'auto',
            'markerWidth':10,
            'markerHeight':	10,
            'xoverflow':'visible'})
        .append('svg:path')
        .attr('d', 'M 0,-5 L 10 ,0 L 0,5')
        .style('fill', "#999" );

    var simulation321 = d3.forceSimulation()
        .force("link", d3.forceLink().id(function (d) {return d.id;}).distance(100).strength(1))
        .force("charge", d3.forceManyBody())
        .force("center", d3.forceCenter(width / 2, height / 2))
		.alphaDecay(0);

var div = d3.select('body').append('div')   
    .attr('class', 'tooltip')               
    .style('opacity', 0);
	
	
    d3.json("graph321.json", function (error, graph) {
	
        if (error) throw error;
        update(graph.links, graph.nodes);
		
		
    });
	
	
update(graph.links, graph.nodes);
setTimeout(function(){force.alpha(0.1);},1000);

    function update(links, nodes) {
        link = svg321.selectAll(".link")
            .data(links)
            .enter()
            .append("line")
            .attr("class", "link")
            .attr('marker-end','url(#arrowhead)')
			.style("stroke-width","1")
      .style("stroke", function(d) { return colors(d.value); })

        link.append("title")
            .text(function (d) {return d.type;});

        edgepaths = svg321.selectAll(".edgepath")
            .data(links)
            .enter()
            .append('path')
            .attrs({
                'class': 'edgepath',
                'fill-opacity': 0,
                'stroke-opacity': 0,
				
                'id': function (d, i) {return 'edgepath' + i}
            })
            .style("pointer-events", "none")
		
       ;

        edgelabels = svg321.selectAll(".edgelabel")
            .data(links)
            .enter()
            .append('text')
			
            .style("fill", function(d) { return colors(d.value); })
            .attrs({
                'class': 'edgelabel',
                'id': function (d, i) {return 'edgelabel' + i},
                'font-size': 15,
				'font-family': "Arial",
               
            });

        edgelabels.append('textPath')
            .attr('xlink:href', function (d, i) {return '#edgepath' + i})
            .style("text-anchor", "middle")
            .style("pointer-events", "none")
            .attr("startOffset", "50%")
           ;
			
			
			var data = [{"label":"is a", "value":194},
        {"label":"overlaps", "value":567},
        {"label":"occurs in", "value":1314},
        {"label":"located in", "value":793},
        {"label":"has part", "value":1929},
        {"label":"part of", "value":1383}];
		
			var legend = d3.select("#container321").append("svg")
    .attr("class", "legend")
    .attr("width", 140)
    .attr("height", 400)
    .selectAll("g")
	.data(colors.domain()) 
    .enter()
    .append("g")
    .attr("transform", function(d, i) {
      return "translate(0," + i * 20 + ")";
    });
  legend.append("rect")
 
    .attr("width", 18)
    .attr("height", 2)
    .style('fill', colors)                                   // NEW
    .style('stroke', colors); 
	
	
  legend.append("text")
    .data(data)
    .attr("x", 24)
    .attr("y", 12)
   
    .text(function(d) {
       {return d.label;}
    });
		

        node = svg321.selectAll(".node")
            .data(nodes)
            .enter()
            .append("g")
            .attr("class", "node")
            .call(d3.drag()
                    .on("start", dragstarted)
                    .on("drag", dragged)
                    //.on("end", dragended)
            )
			.on("tick", ticked)
			.on("click", click)
      .on("dblclick", dblclick)
	  
	  .on('mouseover', function(d) {      
        div.transition()        
            .duration(200)      
            .style('opacity', .9);      
			if (d.id == 1) 
        div.html('<h4>' + d.name + '</h4>' + '<p>' + "An area in which grasses (Graminae) are a significant component of the vegetation." +  '</p>')  
            .style('left', (d3.event.pageX ) + 'px')     
            .style('top', (d3.event.pageY + 58) + 'px')
			else
			div.html('<p>' + d.name + '</p>' )  
            .style('left', (d3.event.pageX ) + 'px')     
            .style('top', (d3.event.pageY + 58) + 'px')

			
        
		})                  
    .on('mouseout', function(d) {       
        div.transition()        
            .duration(500)      
            .style('opacity', 0);   
    });

        node.append("circle")
            .attr("r", 7)
            .style("fill", function (d, i) {
			
			if (i>0) {return colors(d.value)}
			else { return '#ccf24d'}
			})
			

        node.append("text")
            .attr("dy", -3)
            .text(function (d) {return d.name})
			.attr('font-size',  function(d, i) {
        if (i>0) { return '1.2em' }
        else { return '1.8em'}
    }
	)			;

        simulation321
            .nodes(nodes)
            .on("tick", ticked);

        simulation321.force("link")
            .links(links);
    }
	
	

    function ticked() {
        link
            .attr("x1", function (d) {return d.source.x;})
            .attr("y1", function (d) {return d.source.y;})
            .attr("x2", function (d) {return d.target.x;})
            .attr("y2", function (d) {return d.target.y;});

        node
            .attr("transform", function (d) {return "translate(" + d.x + ", " + d.y + ")";});

        edgepaths.attr('d', function (d) {
            return 'M ' + d.source.x + ' ' + d.source.y + ' L ' + d.target.x + ' ' + d.target.y;
        });

        edgelabels.attr('transform', function (d) {
            if (d.target.x < d.source.x) {
                var bbox = this.getBBox();

                rx = bbox.x + bbox.width / 2;
                ry = bbox.y + bbox.height / 2;
                return 'rotate(180 ' + rx + ' ' + ry + ')';
            }
            else {
                return 'rotate(0)';
            }
        });
    }

    function dragstarted(d) {
        if (!d3.event.active) simulation321.alphaTarget(0.3).restart()
        d.fx = d.x;
        d.fy = d.y;
    }

    function dragged(d) {
        d.fx = d3.event.x;
        d.fy = d3.event.y;
    }
	
	
	// action to take on mouse click
function click() {
  d3.select(this).select("text").transition()
    .duration(750)
    .attr("x", 22)
    .style("stroke", "lightsteelblue")
    .style("stroke-width", ".5px")
    .style("font", "20px ");
  d3.select(this).select("circle").transition()
    .duration(750)
    .attr("r", 14);
}

// action to take on mouse double click
function dblclick() {
  d3.select(this).select("circle").transition()
    .duration(750)
    .attr("r", 6);
  d3.select(this).select("text").transition()
    .duration(750)
    .attr("x", 12)
    .style("stroke", "none")
    .style("fill", "black")
    .style("stroke", "none")
    .style("font", "15px ");
}

}
	  else if (layer.id === 'exi') {
	  
	  document.getElementById('container112').style.display ='block';
	  document.getElementById('container323').style.display ='none';
	  document.getElementById('container243').style.display ='none';
	  document.getElementById('container222').style.display ='none';
	  document.getElementById('container242').style.display ='none';
	  document.getElementById('container324').style.display ='none';
	  document.getElementById('container334').style.display ='none';
	  document.getElementById('container321').style.display ='none';
	  document.getElementById('container131').style.display ='none';
	   document.getElementById('container1').style.display ='none';
	   document.getElementById('container211').style.display ='none';
	  var colors = d3.scaleOrdinal(d3.schemeCategory10);

    var svg112 = d3.select("#container112").select("svg"),
        width = +svg112.attr("width"),
        height = +svg112.attr("height"),
        node,
        link;

    svg112.append('defs').append('marker')
        .attrs({'id':'arrowhead',
            'viewBox':'-0 -5 10 10',
            'refX':13,
            'refY':0,
            'orient':'auto',
            'markerWidth':10,
            'markerHeight':	10,
            'xoverflow':'visible'})
        .append('svg:path')
        .attr('d', 'M 0,-5 L 10 ,0 L 0,5')
        .style('fill', "#999" );

    var simulation112 = d3.forceSimulation()
        .force("link", d3.forceLink().id(function (d) {return d.id;}).distance(100).strength(1))
        .force("charge", d3.forceManyBody())
        .force("center", d3.forceCenter(width / 2, height / 2));

var div = d3.select('body').append('div')   
    .attr('class', 'tooltip')               
    .style('opacity', 0);
	
	
    d3.json("graph112.json", function (error, graph) {
	
        if (error) throw error;
        update(graph.links, graph.nodes);
		
		
    });
	update(graph.links, graph.nodes);
setTimeout(function(){force.alpha(0.1);},1000);

    function update(links, nodes) {
        link = svg112.selectAll(".link")
            .data(links)
            .enter()
            .append("line")
            .attr("class", "link")
            .attr('marker-end','url(#arrowhead)')
			.style("stroke-width","1")
      .style("stroke", function(d) { return colors(d.value); })

        link.append("title")
            .text(function (d) {return d.type;});

        edgepaths = svg112.selectAll(".edgepath")
            .data(links)
            .enter()
            .append('path')
            .attrs({
                'class': 'edgepath',
                'fill-opacity': 0,
                'stroke-opacity': 0,
				
                'id': function (d, i) {return 'edgepath' + i}
            })
            .style("pointer-events", "none")
		
       ;

        edgelabels = svg112.selectAll(".edgelabel")
            .data(links)
            .enter()
            .append('text')
			
            .style("fill", function(d) { return colors(d.value); })
            .attrs({
                'class': 'edgelabel',
                'id': function (d, i) {return 'edgelabel' + i},
                'font-size': 15,
				'font-family': "Arial",
               
            });

        edgelabels.append('textPath')
            .attr('xlink:href', function (d, i) {return '#edgepath' + i})
            .style("text-anchor", "middle")
            .style("pointer-events", "none")
            .attr("startOffset", "50%")
           ;
			
		var data = [{"label":"is a", "value":194},
        {"label":"part of", "value":567},
        {"label":"adjacent to", "value":1314},
        {"label":"located in", "value":793},
        {"label":"has part", "value":1929},
        {"label":"part of", "value":1383}];
		
			var legend = d3.select("#container112").append("svg")
    .attr("class", "legend")
    .attr("width", 140)
    .attr("height", 400)
    .selectAll("g")
	.data(colors.domain()) 
    .enter()
    .append("g")
    .attr("transform", function(d, i) {
      return "translate(0," + i * 20 + ")";
    });
  legend.append("rect")
 
    .attr("width", 18)
    .attr("height", 2)
    .style('fill', colors)                                   // NEW
    .style('stroke', colors); 
	
	
  legend.append("text")
    .data(data)
    .attr("x", 24)
    .attr("y", 12)
   
    .text(function(d) {
       {return d.label;}
    });

        node = svg112.selectAll(".node")
            .data(nodes)
            .enter()
            .append("g")
            .attr("class", "node")
            .call(d3.drag()
                    .on("start", dragstarted)
                    .on("drag", dragged)
                    //.on("end", dragended)
            )
			.on("tick", ticked)
			.on("click", click)
      .on("dblclick", dblclick)
	  
	  .on('mouseover', function(d) {      
        div.transition()        
            .duration(200)      
            .style('opacity', .9);      
			if (d.id == 1) 
        div.html('<h4>' + d.name + '</h4>' + '<p>' + "An area of a planet's surface which is primarily covered by constructed or manufactured objects and materials, possibly interspersed with cultivated or anthropically maintained vegetation." +  '</p>')  
            .style('left', (d3.event.pageX ) + 'px')     
            .style('top', (d3.event.pageY + 58) + 'px')
			else
			div.html('<p>' + d.name + '</p>' )  
            .style('left', (d3.event.pageX ) + 'px')     
            .style('top', (d3.event.pageY + 58) + 'px')

			
        
		})                  
    .on('mouseout', function(d) {       
        div.transition()        
            .duration(500)      
            .style('opacity', 0);   
    });

        node.append("circle")
            .attr("r", 7)
            .style("fill", function (d, i) {
			
			if (i>0) {return colors(d.value)}
			else { return '#ff0000'}
			})
			

        node.append("text")
            .attr("dy", -3)
            .text(function (d) {return d.name})
			.attr('font-size',  function(d, i) {
        if (i>0) { return '1.2em' }
        else { return '1.8em'}
    }
	)			;

        simulation112
            .nodes(nodes)
            .on("tick", ticked);

        simulation112.force("link")
            .links(links);
    }
	
	

    function ticked() {
        link
            .attr("x1", function (d) {return d.source.x;})
            .attr("y1", function (d) {return d.source.y;})
            .attr("x2", function (d) {return d.target.x;})
            .attr("y2", function (d) {return d.target.y;});

        node
            .attr("transform", function (d) {return "translate(" + d.x + ", " + d.y + ")";});

        edgepaths.attr('d', function (d) {
            return 'M ' + d.source.x + ' ' + d.source.y + ' L ' + d.target.x + ' ' + d.target.y;
        });

        edgelabels.attr('transform', function (d) {
            if (d.target.x < d.source.x) {
                var bbox = this.getBBox();

                rx = bbox.x + bbox.width / 2;
                ry = bbox.y + bbox.height / 2;
                return 'rotate(180 ' + rx + ' ' + ry + ')';
            }
            else {
                return 'rotate(0)';
            }
        });
    }

    function dragstarted(d) {
        if (!d3.event.active) simulation112.alphaTarget(0.3).restart()
        d.fx = d.x;
        d.fy = d.y;
    }

    function dragged(d) {
        d.fx = d3.event.x;
        d.fy = d3.event.y;
    }
	
	
	// action to take on mouse click
function click() {
  d3.select(this).select("text").transition()
    .duration(750)
    .attr("x", 22)
    .style("stroke", "lightsteelblue")
    .style("stroke-width", ".5px")
    .style("font", "20px ");
  d3.select(this).select("circle").transition()
    .duration(750)
    .attr("r", 14);
}

// action to take on mouse double click
function dblclick() {
  d3.select(this).select("circle").transition()
    .duration(750)
    .attr("r", 6);
  d3.select(this).select("text").transition()
    .duration(750)
    .attr("x", 12)
    .style("stroke", "none")
    .style("fill", "black")
    .style("stroke", "none")
    .style("font", "15px ");
}
}
      else if (layer.id === 'epta') {
	  
	  document.getElementById('container131').style.display ='block';
	  document.getElementById('container323').style.display ='none';
	  document.getElementById('container243').style.display ='none';
	  document.getElementById('container222').style.display ='none';
	  document.getElementById('container242').style.display ='none';
	  document.getElementById('container324').style.display ='none';
	  document.getElementById('container334').style.display ='none';
	  document.getElementById('container112').style.display ='none';
	  document.getElementById('container321').style.display ='none';
	   document.getElementById('container1').style.display ='none';
	   document.getElementById('container211').style.display ='none';
	  var colors = d3.scaleOrdinal(d3.schemeCategory10);

    var svg131 = d3.select("#container131").select("svg"),
        width = +svg131.attr("width"),
        height = +svg131.attr("height"),
        node,
        link;

    svg131.append('defs').append('marker')
        .attrs({'id':'arrowhead',
            'viewBox':'-0 -5 10 10',
            'refX':13,
            'refY':0,
            'orient':'auto',
            'markerWidth':10,
            'markerHeight':	10,
            'xoverflow':'visible'})
        .append('svg:path')
        .attr('d', 'M 0,-5 L 10 ,0 L 0,5')
        .style('fill', "#999" );

    var simulation131 = d3.forceSimulation()
        .force("link", d3.forceLink().id(function (d) {return d.id;}).distance(100).strength(1))
        .force("charge", d3.forceManyBody())
        .force("center", d3.forceCenter(width / 2, height / 2));

var div = d3.select('body').append('div')   
    .attr('class', 'tooltip')               
    .style('opacity', 0);
	
	
    d3.json("graph131.json", function (error, graph) {
	
        if (error) throw error;
        update(graph.links, graph.nodes);
		
		
    });
	
	
	update(graph.links, graph.nodes);
setTimeout(function(){force.alpha(0.1);},1000);

    function update(links, nodes) {
        link = svg131.selectAll(".link")
            .data(links)
            .enter()
            .append("line")
            .attr("class", "link")
            .attr('marker-end','url(#arrowhead)')
			.style("stroke-width","1")
      .style("stroke", function(d) { return colors(d.value); })

        link.append("title")
            .text(function (d) {return d.type;});

        edgepaths = svg131.selectAll(".edgepath")
            .data(links)
            .enter()
            .append('path')
            .attrs({
                'class': 'edgepath',
                'fill-opacity': 0,
                'stroke-opacity': 0,
				
                'id': function (d, i) {return 'edgepath' + i}
            })
            .style("pointer-events", "none")
		
       ;

        edgelabels = svg131.selectAll(".edgelabel")
            .data(links)
            .enter()
            .append('text')
			
            .style("fill", function(d) { return colors(d.value); })
            .attrs({
                'class': 'edgelabel',
                'id': function (d, i) {return 'edgelabel' + i},
                'font-size': 15,
				'font-family': "Arial",
               
            });

        edgelabels.append('textPath')
            .attr('xlink:href', function (d, i) {return '#edgepath' + i})
            .style("text-anchor", "middle")
            .style("pointer-events", "none")
            .attr("startOffset", "50%")
          ;
			
			var data = [{"label":"is a", "value":194},
        {"label":"part of", "value":567},
        {"label":"adjacent to", "value":1314},
        {"label":"located in", "value":793},
        {"label":"has part", "value":1929},
        {"label":"part of", "value":1383}];
		
			var legend = d3.select("#container131").append("svg")
    .attr("class", "legend")
    .attr("width", 140)
    .attr("height", 400)
    .selectAll("g")
	.data(colors.domain()) 
    .enter()
    .append("g")
    .attr("transform", function(d, i) {
      return "translate(0," + i * 20 + ")";
    });
  legend.append("rect")
 
    .attr("width", 18)
    .attr("height", 2)
    .style('fill', colors)                                   // NEW
    .style('stroke', colors); 
	
	
  legend.append("text")
    .data(data)
    .attr("x", 24)
    .attr("y", 12)
   
    .text(function(d) {
       {return d.label;}
    });

        node = svg131.selectAll(".node")
            .data(nodes)
            .enter()
            .append("g")
            .attr("class", "node")
            .call(d3.drag()
                    .on("start", dragstarted)
                    .on("drag", dragged)
                    //.on("end", dragended)
            )
			.on("tick", ticked)
			.on("click", click)
      .on("dblclick", dblclick)
	  
	  .on('mouseover', function(d) {      
        div.transition()        
            .duration(200)      
            .style('opacity', .9);      
			if (d.id == 1) 
        div.html('<h3>' + d.name + '</h3>' + '<p>' + "An open-pit mine from which rock or minerals are extracted." +  '</p>')  
            .style('left', (d3.event.pageX ) + 'px')     
            .style('top', (d3.event.pageY + 58) + 'px')
			else
			div.html('<p>' + d.name + '</p>' )  
            .style('left', (d3.event.pageX ) + 'px')     
            .style('top', (d3.event.pageY + 58) + 'px')

			
        
		})                  
    .on('mouseout', function(d) {       
        div.transition()        
            .duration(500)      
            .style('opacity', 0);   
    });

        node.append("circle")
            .attr("r", 7)
            .style("fill", function (d, i) {
			
			if (i>0) {return colors(d.value)}
			else { return '#9900cc'}
			})
			

        node.append("text")
            .attr("dy", -3)
            .text(function (d) {return d.name})
			.attr('font-size',  function(d, i) {
        if (i>0) { return '1.2em' }
        else { return '1.8em'}
    }
	)			;

        simulation131
            .nodes(nodes)
            .on("tick", ticked);

        simulation131.force("link")
            .links(links);
    }
	
	

    function ticked() {
        link
            .attr("x1", function (d) {return d.source.x;})
            .attr("y1", function (d) {return d.source.y;})
            .attr("x2", function (d) {return d.target.x;})
            .attr("y2", function (d) {return d.target.y;});

        node
            .attr("transform", function (d) {return "translate(" + d.x + ", " + d.y + ")";});

        edgepaths.attr('d', function (d) {
            return 'M ' + d.source.x + ' ' + d.source.y + ' L ' + d.target.x + ' ' + d.target.y;
        });

        edgelabels.attr('transform', function (d) {
            if (d.target.x < d.source.x) {
                var bbox = this.getBBox();

                rx = bbox.x + bbox.width / 2;
                ry = bbox.y + bbox.height / 2;
                return 'rotate(180 ' + rx + ' ' + ry + ')';
            }
            else {
                return 'rotate(0)';
            }
        });
    }

    function dragstarted(d) {
        if (!d3.event.active) simulation131.alphaTarget(0.3).restart()
        d.fx = d.x;
        d.fy = d.y;
    }

    function dragged(d) {
        d.fx = d3.event.x;
        d.fy = d3.event.y;
    }
	
	
	// action to take on mouse click
function click() {
  d3.select(this).select("text").transition()
    .duration(750)
    .attr("x", 22)
    .style("stroke", "lightsteelblue")
    .style("stroke-width", ".5px")
    .style("font", "20px ");
  d3.select(this).select("circle").transition()
    .duration(750)
    .attr("r", 14);
}

// action to take on mouse double click
function dblclick() {
  d3.select(this).select("circle").transition()
    .duration(750)
    .attr("r", 6);
  d3.select(this).select("text").transition()
    .duration(750)
    .attr("x", 12)
    .style("stroke", "none")
    .style("fill", "black")
    .style("stroke", "none")
    .style("font", "15px ");
}
}
     else if (layer.id === 'okto') {
	  
	  document.getElementById('container211').style.display ='block';
	  document.getElementById('container323').style.display ='none';
	  document.getElementById('container243').style.display ='none';
	  document.getElementById('container222').style.display ='none';
	  document.getElementById('container242').style.display ='none';
	  document.getElementById('container324').style.display ='none';
	  document.getElementById('container334').style.display ='none';
	  document.getElementById('container131').style.display ='none';
	  document.getElementById('container112').style.display ='none';
	  document.getElementById('container321').style.display ='none';
	   document.getElementById('container1').style.display ='none';
	  var colors = d3.scaleOrdinal(d3.schemeCategory10);

    var svg211 = d3.select("#container211").select("svg"),
        width = +svg211.attr("width"),
        height = +svg211.attr("height"),
        node,
        link;

    svg211.append('defs').append('marker')
        .attrs({'id':'arrowhead',
            'viewBox':'-0 -5 10 10',
            'refX':13,
            'refY':0,
            'orient':'auto',
            'markerWidth':10,
            'markerHeight':	10,
            'xoverflow':'visible'})
        .append('svg:path')
        .attr('d', 'M 0,-5 L 10 ,0 L 0,5')
        .style('fill', "#999" );

    var simulation211 = d3.forceSimulation()
        .force("link", d3.forceLink().id(function (d) {return d.id;}).distance(100).strength(1))
        .force("charge", d3.forceManyBody())
        .force("center", d3.forceCenter(width / 2, height / 2));

var div = d3.select('body').append('div')   
    .attr('class', 'tooltip')               
    .style('opacity', 0);
	
	
    d3.json("graphtest111.json", function (error, graph) {
	
        if (error) throw error;
        update(graph.links, graph.nodes);
		
		
    });
	
		update(graph.links, graph.nodes);
setTimeout(function(){force.alpha(0.1);},1000);

    function update(links, nodes) {
        link = svg211.selectAll(".link")
            .data(links)
            .enter()
            .append("line")
            .attr("class", "link")
            .attr('marker-end','url(#arrowhead)')
			.style("stroke-width","1")
      .style("stroke", function(d) { return colors(d.value); })

        link.append("title")
            .text(function (d) {return d.type;});

        edgepaths = svg211.selectAll(".edgepath")
            .data(links)
            .enter()
            .append('path')
            .attrs({
                'class': 'edgepath',
                'fill-opacity': 0,
                'stroke-opacity': 0,
				
                'id': function (d, i) {return 'edgepath' + i}
            })
            .style("pointer-events", "none")
		
       ;

        edgelabels = svg211.selectAll(".edgelabel")
            .data(links)
            .enter()
            .append('text')
			
            .style("fill", function(d) { return colors(d.value); })
            .attrs({
                'class': 'edgelabel',
                'id': function (d, i) {return 'edgelabel' + i},
                'font-size': 15,
				'font-family': "Arial",
               
            });

        edgelabels.append('textPath')
            .attr('xlink:href', function (d, i) {return '#edgepath' + i})
            .style("text-anchor", "middle")
            .style("pointer-events", "none")
            .attr("startOffset", "50%")
           ;
			
		var data = [{"label":"is a", "value":194},
        {"label":"has quality", "value":567},
        {"label":"adjacent to", "value":1314},
        {"label":"located in", "value":793},
        {"label":"has part", "value":1929},
        {"label":"part of", "value":1383}];
		
			var legend = d3.select("#container211").append("svg")
    .attr("class", "legend")
    .attr("width", 140)
    .attr("height", 400)
    .selectAll("g")
	.data(colors.domain()) 
    .enter()
    .append("g")
    .attr("transform", function(d, i) {
      return "translate(0," + i * 20 + ")";
    });
  legend.append("rect")
 
    .attr("width", 18)
    .attr("height", 2)
    .style('fill', colors)                                   // NEW
    .style('stroke', colors); 
	
	
  legend.append("text")
    .data(data)
    .attr("x", 24)
    .attr("y", 12)
   
    .text(function(d) {
       {return d.label;}
    });

        node = svg211.selectAll(".node")
            .data(nodes)
            .enter()
            .append("g")
            .attr("class", "node")
            .call(d3.drag()
                    .on("start", dragstarted)
                    .on("drag", dragged)
                    //.on("end", dragended)
            )
			.on("tick", ticked)
			.on("click", click)
      .on("dblclick", dblclick)
	  
	  .on('mouseover', function(d) {      
        div.transition()        
            .duration(200)      
            .style('opacity', .9);      
			if (d.id == 1) 
        div.html('<h3>' + d.name + '</h3>' + '<p>' + "Land which is regularly manipulated by human activities, such as plowing or tilling, in order to grow crops." +  '</p>')  
            .style('left', (d3.event.pageX ) + 'px')     
            .style('top', (d3.event.pageY + 58) + 'px')
			else
			div.html('<p>' + d.name + '</p>' )  
            .style('left', (d3.event.pageX ) + 'px')     
            .style('top', (d3.event.pageY + 58) + 'px')

			
        
		})                  
    .on('mouseout', function(d) {       
        div.transition()        
            .duration(500)      
            .style('opacity', 0);   
    });

        node.append("circle")
            .attr("r", 7)
            .style("fill", function (d, i) {
			if (i==0) { return '#ffffb2'}
			else if ( i==3) { return '#FFFF00'}
			
			else { return colors(d.value)}
			})
			

        node.append("text")
            .attr("dy", -3)
            .text(function (d) {return d.name})
			.attr('font-size',  function(d, i) {
        if (i>0) { return '1.2em' }
        else { return '1.8em'}
    }
	)			;

        simulation211
            .nodes(nodes)
            .on("tick", ticked);

        simulation211.force("link")
            .links(links);
    }
	
	

    function ticked() {
        link
            .attr("x1", function (d) {return d.source.x;})
            .attr("y1", function (d) {return d.source.y;})
            .attr("x2", function (d) {return d.target.x;})
            .attr("y2", function (d) {return d.target.y;});

        node
            .attr("transform", function (d) {return "translate(" + d.x + ", " + d.y + ")";});

        edgepaths.attr('d', function (d) {
            return 'M ' + d.source.x + ' ' + d.source.y + ' L ' + d.target.x + ' ' + d.target.y;
        });

        edgelabels.attr('transform', function (d) {
            if (d.target.x < d.source.x) {
                var bbox = this.getBBox();

                rx = bbox.x + bbox.width / 2;
                ry = bbox.y + bbox.height / 2;
                return 'rotate(180 ' + rx + ' ' + ry + ')';
            }
            else {
                return 'rotate(0)';
            }
        });
    }

    function dragstarted(d) {
        if (!d3.event.active) simulation211.alphaTarget(0.3).restart()
        d.fx = d.x;
        d.fy = d.y;
    }

    function dragged(d) {
        d.fx = d3.event.x;
        d.fy = d3.event.y;
    }
	
	
	// action to take on mouse click
function click() {
  d3.select(this).select("text").transition()
    .duration(750)
    .attr("x", 22)
    .style("stroke", "lightsteelblue")
    .style("stroke-width", ".5px")
    .style("font", "20px ");
  d3.select(this).select("circle").transition()
    .duration(750)
    .attr("r", 14);
}

// action to take on mouse double click
function dblclick() {
  d3.select(this).select("circle").transition()
    .duration(750)
    .attr("r", 6);
  d3.select(this).select("text").transition()
    .duration(750)
    .attr("x", 12)
    .style("stroke", "none")
    .style("fill", "black")
    .style("stroke", "none")
    .style("font", "15px ");
}
}
else if (layer.id === 'pente') {
	 
	  
	  document.getElementById('container334').style.display ='block';
	  document.getElementById('container323').style.display ='none';
	  document.getElementById('container243').style.display ='none';
	  document.getElementById('container222').style.display ='none';
	  document.getElementById('container242').style.display ='none';
	  document.getElementById('container324').style.display ='none';
	  document.getElementById('container211').style.display ='none';
	  document.getElementById('container131').style.display ='none';
	  document.getElementById('container112').style.display ='none';
	  document.getElementById('container321').style.display ='none';
	   document.getElementById('container1').style.display ='none';
	  var colors = d3.scaleOrdinal(d3.schemeCategory10);

    var svg334 = d3.select("#container334").select("svg"),
        width = +svg334.attr("width"),
        height = +svg334.attr("height"),
        node,
        link;

    svg334.append('defs').append('marker')
        .attrs({'id':'arrowhead',
            'viewBox':'-0 -5 10 10',
            'refX':13,
            'refY':0,
            'orient':'auto',
            'markerWidth':10,
            'markerHeight':	10,
            'xoverflow':'visible'})
        .append('svg:path')
        .attr('d', 'M 0,-5 L 10 ,0 L 0,5')
        .style('fill', "#999" );

    var simulation334 = d3.forceSimulation()
        .force("link", d3.forceLink().id(function (d) {return d.id;}).distance(100).strength(1))
        .force("charge", d3.forceManyBody())
        .force("center", d3.forceCenter(width / 2, height / 2));

var div = d3.select('body').append('div')   
    .attr('class', 'tooltip')               
    .style('opacity', 0);
	
	
    d3.json("graph334.json", function (error, graph) {
	
        if (error) throw error;
        update(graph.links, graph.nodes);
		
		
    });
	
	update(graph.links, graph.nodes);
setTimeout(function(){force.alpha(0.1);},1000);

    function update(links, nodes) {
        link = svg334.selectAll(".link")
            .data(links)
            .enter()
            .append("line")
            .attr("class", "link")
            .attr('marker-end','url(#arrowhead)')
			.style("stroke-width","1")
      .style("stroke", function(d) { return colors(d.value); })

        link.append("title")
            .text(function (d) {return d.type;});

        edgepaths = svg334.selectAll(".edgepath")
            .data(links)
            .enter()
            .append('path')
            .attrs({
                'class': 'edgepath',
                'fill-opacity': 0,
                'stroke-opacity': 0,
				
                'id': function (d, i) {return 'edgepath' + i}
            })
            .style("pointer-events", "none")
		
       ;

        edgelabels = svg334.selectAll(".edgelabel")
            .data(links)
            .enter()
            .append('text')
			
            .style("fill", function(d) { return colors(d.value); })
            .attrs({
                'class': 'edgelabel',
                'id': function (d, i) {return 'edgelabel' + i},
                'font-size': 15,
				'font-family': "Arial",
               
            });

        edgelabels.append('textPath')
            .attr('xlink:href', function (d, i) {return '#edgepath' + i})
            .style("text-anchor", "middle")
            .style("pointer-events", "none")
            .attr("startOffset", "50%")
          ;
			
				var data = [{"label":"is a", "value":194},
        {"label":"has quality", "value":567},
        {"label":"adjacent to", "value":1314},
        {"label":"located in", "value":793},
        {"label":"has part", "value":1929},
        {"label":"part of", "value":1383}];
		
			var legend = d3.select("#container334").append("svg")
    .attr("class", "legend")
    .attr("width", 140)
    .attr("height", 400)
    .selectAll("g")
	.data(colors.domain()) 
    .enter()
    .append("g")
    .attr("transform", function(d, i) {
      return "translate(0," + i * 20 + ")";
    });
  legend.append("rect")
 
    .attr("width", 18)
    .attr("height", 2)
    .style('fill', colors)                                   // NEW
    .style('stroke', colors); 
	
	
  legend.append("text")
    .data(data)
    .attr("x", 24)
    .attr("y", 12)
   
    .text(function(d) {
       {return d.label;}
    });


        node = svg334.selectAll(".node")
            .data(nodes)
            .enter()
            .append("g")
            .attr("class", "node")
            .call(d3.drag()
                    .on("start", dragstarted)
                    .on("drag", dragged)
                    //.on("end", dragended)
            )
			.on("tick", ticked)
			.on("click", click)
      .on("dblclick", dblclick)
	  
	  .on('mouseover', function(d) {      
        div.transition()        
            .duration(200)      
            .style('opacity', .9);      
			if (d.id == 1) 
        div.html('<h4>' + d.name + '</h4>' + '<p>' + "A shrubland area found primarily in regions with a Mediterranean climate (mid, wet winters and hot dry summers) often shaped by wildfires." +  '</p>')  
            .style('left', (d3.event.pageX ) + 'px')     
            .style('top', (d3.event.pageY + 58) + 'px')
			else
			div.html('<p>' + d.name + '</p>' )  
            .style('left', (d3.event.pageX ) + 'px')     
            .style('top', (d3.event.pageY + 58) + 'px')

			
        
		})                  
    .on('mouseout', function(d) {       
        div.transition()        
            .duration(500)      
            .style('opacity', 0);   
    });

        node.append("circle")
            .attr("r", 7)
            .style("fill", function (d, i) {
			
			if (i>0) {return colors(d.value)}
			else { return '#000000'}
			})
			

        node.append("text")
            .attr("dy", -3)
            .text(function (d) {return d.name})
			.attr('font-size',  function(d, i) {
        if (i>0) { return '1.2em' }
        else { return '1.8em'}
    }
	)			;

        simulation334
            .nodes(nodes)
            .on("tick", ticked);

        simulation334.force("link")
            .links(links);
    }
	
	

    function ticked() {
        link
            .attr("x1", function (d) {return d.source.x;})
            .attr("y1", function (d) {return d.source.y;})
            .attr("x2", function (d) {return d.target.x;})
            .attr("y2", function (d) {return d.target.y;});

        node
            .attr("transform", function (d) {return "translate(" + d.x + ", " + d.y + ")";});

        edgepaths.attr('d', function (d) {
            return 'M ' + d.source.x + ' ' + d.source.y + ' L ' + d.target.x + ' ' + d.target.y;
        });

        edgelabels.attr('transform', function (d) {
            if (d.target.x < d.source.x) {
                var bbox = this.getBBox();

                rx = bbox.x + bbox.width / 2;
                ry = bbox.y + bbox.height / 2;
                return 'rotate(180 ' + rx + ' ' + ry + ')';
            }
            else {
                return 'rotate(0)';
            }
        });
    }

    function dragstarted(d) {
        if (!d3.event.active) simulation334.alphaTarget(0.3).restart()
        d.fx = d.x;
        d.fy = d.y;
    }

    function dragged(d) {
        d.fx = d3.event.x;
        d.fy = d3.event.y;
    }
	
	
	// action to take on mouse click
function click() {
  d3.select(this).select("text").transition()
    .duration(750)
    .attr("x", 22)
    .style("stroke", "lightsteelblue")
    .style("stroke-width", ".5px")
    .style("font", "20px ");
  d3.select(this).select("circle").transition()
    .duration(750)
    .attr("r", 14);
}

// action to take on mouse double click
function dblclick() {
  d3.select(this).select("circle").transition()
    .duration(750)
    .attr("r", 6);
  d3.select(this).select("text").transition()
    .duration(750)
    .attr("x", 12)
    .style("stroke", "none")
    .style("fill", "black")
    .style("stroke", "none")
    .style("font", "15px ");
}
}
else if (layer.id === 'tesera') {
	  
	  document.getElementById('container324').style.display ='block';
	  document.getElementById('container323').style.display ='none';
	  document.getElementById('container243').style.display ='none';
	  document.getElementById('container222').style.display ='none';
	  document.getElementById('container242').style.display ='none';
	  document.getElementById('container334').style.display ='none';
	  document.getElementById('container211').style.display ='none';
	  document.getElementById('container131').style.display ='none';
	  document.getElementById('container112').style.display ='none';
	  document.getElementById('container321').style.display ='none';
	   document.getElementById('container1').style.display ='none';
	  var colors = d3.scaleOrdinal(d3.schemeCategory10);

    var svg324 = d3.select("#container324").select("svg"),
        width = +svg324.attr("width"),
        height = +svg324.attr("height"),
        node,
        link;

    svg324.append('defs').append('marker')
        .attrs({'id':'arrowhead',
            'viewBox':'-0 -5 10 10',
            'refX':13,
            'refY':0,
            'orient':'auto',
            'markerWidth':10,
            'markerHeight':	10,
            'xoverflow':'visible'})
        .append('svg:path')
        .attr('d', 'M 0,-5 L 10 ,0 L 0,5')
        .style('fill', "#999" );

    var simulation324 = d3.forceSimulation()
        .force("link", d3.forceLink().id(function (d) {return d.id;}).distance(100).strength(1))
        .force("charge", d3.forceManyBody())
        .force("center", d3.forceCenter(width / 2, height / 2));

var div = d3.select('body').append('div')   
    .attr('class', 'tooltip')               
    .style('opacity', 0);
	
	
    d3.json("graph324.json", function (error, graph) {
	
        if (error) throw error;
        update(graph.links, graph.nodes);
		
		
    });
	
	update(graph.links, graph.nodes);
setTimeout(function(){force.alpha(0.1);},1000);
	
    function update(links, nodes) {
        link = svg324.selectAll(".link")
            .data(links)
            .enter()
            .append("line")
            .attr("class", "link")
            .attr('marker-end','url(#arrowhead)')
			.style("stroke-width","1")
      .style("stroke", function(d) { return colors(d.value); })

        link.append("title")
            .text(function (d) {return d.type;});

        edgepaths = svg324.selectAll(".edgepath")
            .data(links)
            .enter()
            .append('path')
            .attrs({
                'class': 'edgepath',
                'fill-opacity': 0,
                'stroke-opacity': 0,
				
                'id': function (d, i) {return 'edgepath' + i}
            })
            .style("pointer-events", "none")
		
       ;

        edgelabels = svg324.selectAll(".edgelabel")
            .data(links)
            .enter()
            .append('text')
			
            .style("fill", function(d) { return colors(d.value); })
            .attrs({
                'class': 'edgelabel',
                'id': function (d, i) {return 'edgelabel' + i},
                'font-size': 15,
				'font-family': "Arial",
               
            });

        edgelabels.append('textPath')
            .attr('xlink:href', function (d, i) {return '#edgepath' + i})
            .style("text-anchor", "middle")
            .style("pointer-events", "none")
            .attr("startOffset", "50%")
           ;

	var data = [{"label":"is a", "value":194},
        {"label":"has part", "value":567},
        {"label":"adjacent to", "value":1314},
        {"label":"located in", "value":793},
        {"label":"has part", "value":1929},
        {"label":"part of", "value":1383}];
		
			var legend = d3.select("#container324").append("svg")
    .attr("class", "legend")
    .attr("width", 140)
    .attr("height", 400)
    .selectAll("g")
	.data(colors.domain()) 
    .enter()
    .append("g")
    .attr("transform", function(d, i) {
      return "translate(0," + i * 20 + ")";
    });
  legend.append("rect")
 
    .attr("width", 18)
    .attr("height", 2)
    .style('fill', colors)                                   // NEW
    .style('stroke', colors); 
	
	
  legend.append("text")
    .data(data)
    .attr("x", 24)
    .attr("y", 12)
   
    .text(function(d) {
       {return d.label;}
    });
	
        node = svg324.selectAll(".node")
            .data(nodes)
            .enter()
            .append("g")
            .attr("class", "node")
            .call(d3.drag()
                    .on("start", dragstarted)
                    .on("drag", dragged)
                    //.on("end", dragended)
            )
			.on("tick", ticked)
			.on("click", click)
      .on("dblclick", dblclick)
	  
	  .on('mouseover', function(d) {      
        div.transition()        
            .duration(200)      
            .style('opacity', .9);      
			if (d.id == 1) 
        div.html('<h4>' + d.name + '</h4>' + '<p>' + "A woodland biome is a terrestrial biome which includes, across its entire spatial extent, woody plants spaced sufficiently far apart to allow light penetration to support communities of herbaceous plants or shrubs living closer to the woodland floor." +  '</p>')  
            .style('left', (d3.event.pageX ) + 'px')     
            .style('top', (d3.event.pageY + 58) + 'px')
			else
			div.html('<p>' + d.name + '</p>' )  
            .style('left', (d3.event.pageX ) + 'px')     
            .style('top', (d3.event.pageY + 58) + 'px')

			
        
		})                  
    .on('mouseout', function(d) {       
        div.transition()        
            .duration(500)      
            .style('opacity', 0);   
    });

        node.append("circle")
            .attr("r", 7)
            .style("fill", function (d, i) {
			
			if (i>0) {return colors(d.value)}
			else { return '#336600'}
			})
			

        node.append("text")
            .attr("dy", -3)
            .text(function (d) {return d.name})
			.attr('font-size',  function(d, i) {
        if (i>0) { return '1.2em' }
        else { return '1.8em'}
    }
	)			;

        simulation324
            .nodes(nodes)
            .on("tick", ticked);

        simulation324.force("link")
            .links(links);
    }
	
	

    function ticked() {
        link
            .attr("x1", function (d) {return d.source.x;})
            .attr("y1", function (d) {return d.source.y;})
            .attr("x2", function (d) {return d.target.x;})
            .attr("y2", function (d) {return d.target.y;});

        node
            .attr("transform", function (d) {return "translate(" + d.x + ", " + d.y + ")";});

        edgepaths.attr('d', function (d) {
            return 'M ' + d.source.x + ' ' + d.source.y + ' L ' + d.target.x + ' ' + d.target.y;
        });

        edgelabels.attr('transform', function (d) {
            if (d.target.x < d.source.x) {
                var bbox = this.getBBox();

                rx = bbox.x + bbox.width / 2;
                ry = bbox.y + bbox.height / 2;
                return 'rotate(180 ' + rx + ' ' + ry + ')';
            }
            else {
                return 'rotate(0)';
            }
        });
    }

    function dragstarted(d) {
        if (!d3.event.active) simulation324.alphaTarget(0.3).restart()
        d.fx = d.x;
        d.fy = d.y;
    }

    function dragged(d) {
        d.fx = d3.event.x;
        d.fy = d3.event.y;
    }
	
	
	// action to take on mouse click
function click() {
  d3.select(this).select("text").transition()
    .duration(750)
    .attr("x", 22)
    .style("stroke", "lightsteelblue")
    .style("stroke-width", ".5px")
    .style("font", "20px ");
  d3.select(this).select("circle").transition()
    .duration(750)
    .attr("r", 14);
}

// action to take on mouse double click
function dblclick() {
  d3.select(this).select("circle").transition()
    .duration(750)
    .attr("r", 6);
  d3.select(this).select("text").transition()
    .duration(750)
    .attr("x", 12)
    .style("stroke", "none")
    .style("fill", "black")
    .style("stroke", "none")
    .style("font", "15px ");
}
}
else if (layer.id === 'deka') {
	  
	  document.getElementById('container242').style.display ='block';
	  document.getElementById('container323').style.display ='none';
	  document.getElementById('container243').style.display ='none';
	  document.getElementById('container222').style.display ='none';
	  document.getElementById('container324').style.display ='none';
	  document.getElementById('container334').style.display ='none';
	  document.getElementById('container211').style.display ='none';
	  document.getElementById('container131').style.display ='none';
	  document.getElementById('container112').style.display ='none';
	  document.getElementById('container321').style.display ='none';
	   document.getElementById('container1').style.display ='none';
	  var colors = d3.scaleOrdinal(d3.schemeCategory10);

    var svg242 = d3.select("#container242").select("svg"),
        width = +svg242.attr("width"),
        height = +svg242.attr("height"),
        node,
        link;

    svg242.append('defs').append('marker')
        .attrs({'id':'arrowhead',
            'viewBox':'-0 -5 10 10',
            'refX':13,
            'refY':0,
            'orient':'auto',
            'markerWidth':10,
            'markerHeight':	10,
            'xoverflow':'visible'})
        .append('svg:path')
        .attr('d', 'M 0,-5 L 10 ,0 L 0,5')
        .style('fill', "#999" );

    var simulation242 = d3.forceSimulation()
        .force("link", d3.forceLink().id(function (d) {return d.id;}).distance(100).strength(1))
        .force("charge", d3.forceManyBody())
        .force("center", d3.forceCenter(width / 2, height / 2));

var div = d3.select('body').append('div')   
    .attr('class', 'tooltip')               
    .style('opacity', 0);
	
	
    d3.json("graphtest242.json", function (error, graph) {
	
        if (error) throw error;
        update(graph.links, graph.nodes);
		
		
    });
	
		update(graph.links, graph.nodes);
setTimeout(function(){force.alpha(0.1);},1000);

    function update(links, nodes) {
        link = svg242.selectAll(".link")
            .data(links)
            .enter()
            .append("line")
            .attr("class", "link")
            .attr('marker-end','url(#arrowhead)')
			.style("stroke-width","1")
      .style("stroke", function(d) { return colors(d.value); })

        link.append("title")
            .text(function (d) {return d.type;});

        edgepaths = svg242.selectAll(".edgepath")
            .data(links)
            .enter()
            .append('path')
            .attrs({
                'class': 'edgepath',
                'fill-opacity': 0,
                'stroke-opacity': 0,
				
                'id': function (d, i) {return 'edgepath' + i}
            })
            .style("pointer-events", "none")
		
       ;

        edgelabels = svg242.selectAll(".edgelabel")
            .data(links)
            .enter()
            .append('text')
			
            .style("fill", function(d) { return colors(d.value); })
            .attrs({
                'class': 'edgelabel',
                'id': function (d, i) {return 'edgelabel' + i},
                'font-size': 15,
				'font-family': "Arial",
               
            });

        edgelabels.append('textPath')
            .attr('xlink:href', function (d, i) {return '#edgepath' + i})
            .style("text-anchor", "middle")
            .style("pointer-events", "none")
            .attr("startOffset", "50%")
         ;
			
			
				var data = [{"label":"is a", "value":194},
        {"label":"has quality", "value":567},
        {"label":"adjacent to", "value":1314},
        {"label":"located in", "value":793},
        {"label":"has part", "value":1929},
        {"label":"part of", "value":1383}];
		
			var legend = d3.select("#container242").append("svg")
    .attr("class", "legend")
    .attr("width", 140)
    .attr("height", 400)
    .selectAll("g")
	.data(colors.domain()) 
    .enter()
    .append("g")
    .attr("transform", function(d, i) {
      return "translate(0," + i * 20 + ")";
    });
  legend.append("rect")
 
    .attr("width", 18)
    .attr("height", 2)
    .style('fill', colors)                                   // NEW
    .style('stroke', colors); 
	
	
  legend.append("text")
    .data(data)
    .attr("x", 24)
    .attr("y", 12)
   
    .text(function(d) {
       {return d.label;}
    });

        node = svg242.selectAll(".node")
            .data(nodes)
            .enter()
            .append("g")
            .attr("class", "node")
            .call(d3.drag()
                    .on("start", dragstarted)
                    .on("drag", dragged)
                    //.on("end", dragended)
            )
			.on("tick", ticked)
			.on("click", click)
      .on("dblclick", dblclick)
	  
	  .on('mouseover', function(d) {      
        div.transition()        
            .duration(200)      
            .style('opacity', .9);      
			if (d.id == 1) 
        div.html('<h4>' + d.name + '</h4>' + '<p>' + "Land which either hosts plant communities upon which animals may graze has been manipulated by tilling, ploughing, or other human activity for the purposes of seed sowing or planting crops." +  '</p>')  
            .style('left', (d3.event.pageX ) + 'px')     
            .style('top', (d3.event.pageY + 58) + 'px')
			else
			div.html('<p>' + d.name + '</p>' )  
            .style('left', (d3.event.pageX ) + 'px')     
            .style('top', (d3.event.pageY + 58) + 'px')

			
        
		})                  
    .on('mouseout', function(d) {       
        div.transition()        
            .duration(500)      
            .style('opacity', 0);   
    });

        node.append("circle")
            .attr("r", 7)
            .style("fill", function (d, i) {
			if (i==0) 
			{ return '#FFFF00'}
			else if (i==2) 
			{ return '#ffff99'}
			
			else 
			{ return colors(d.value)}
			})
			

        node.append("text")
            .attr("dy", -3)
            .text(function (d) {return d.name})
			.attr('font-size',  function(d, i) {
        if (i>0) { return '1.2em' }
        else { return '1.8em'}
    }
	)			;

        simulation242
            .nodes(nodes)
            .on("tick", ticked);

        simulation242.force("link")
            .links(links);
    }
	
	

    function ticked() {
        link
            .attr("x1", function (d) {return d.source.x;})
            .attr("y1", function (d) {return d.source.y;})
            .attr("x2", function (d) {return d.target.x;})
            .attr("y2", function (d) {return d.target.y;});

        node
            .attr("transform", function (d) {return "translate(" + d.x + ", " + d.y + ")";});

        edgepaths.attr('d', function (d) {
            return 'M ' + d.source.x + ' ' + d.source.y + ' L ' + d.target.x + ' ' + d.target.y;
        });

        edgelabels.attr('transform', function (d) {
            if (d.target.x < d.source.x) {
                var bbox = this.getBBox();

                rx = bbox.x + bbox.width / 2;
                ry = bbox.y + bbox.height / 2;
                return 'rotate(180 ' + rx + ' ' + ry + ')';
            }
            else {
                return 'rotate(0)';
            }
        });
    }

    function dragstarted(d) {
        if (!d3.event.active) simulation242.alphaTarget(0.3).restart()
        d.fx = d.x;
        d.fy = d.y;
    }

    function dragged(d) {
        d.fx = d3.event.x;
        d.fy = d3.event.y;
    }
	
	
	// action to take on mouse click
function click() {
  d3.select(this).select("text").transition()
    .duration(750)
    .attr("x", 22)
    .style("stroke", "lightsteelblue")
    .style("stroke-width", ".5px")
    .style("font", "20px ");
  d3.select(this).select("circle").transition()
    .duration(750)
    .attr("r", 14);
}

// action to take on mouse double click
function dblclick() {
  d3.select(this).select("circle").transition()
    .duration(750)
    .attr("r", 6);
  d3.select(this).select("text").transition()
    .duration(750)
    .attr("x", 12)
    .style("stroke", "none")
    .style("fill", "black")
    .style("stroke", "none")
    .style("font", "15px ");
}
}
else if (layer.id === 'enia') {
	 
	  document.getElementById('container222').style.display ='block';
	  document.getElementById('container323').style.display ='none';
	  document.getElementById('container243').style.display ='none';
	  document.getElementById('container242').style.display ='none';
	  document.getElementById('container324').style.display ='none';
	  document.getElementById('container334').style.display ='none';
	  document.getElementById('container211').style.display ='none';
	  document.getElementById('container131').style.display ='none';
	  document.getElementById('container112').style.display ='none';
	  document.getElementById('container321').style.display ='none';
	   document.getElementById('container1').style.display ='none';
	  var colors = d3.scaleOrdinal(d3.schemeCategory10);

    var svg222 = d3.select("#container222").select("svg"),
        width = +svg222.attr("width"),
        height = +svg222.attr("height"),
        node,
        link;

    svg222.append('defs').append('marker')
        .attrs({'id':'arrowhead',
            'viewBox':'-0 -5 10 10',
            'refX':13,
            'refY':0,
            'orient':'auto',
            'markerWidth':10,
            'markerHeight':	10,
            'xoverflow':'visible'})
        .append('svg:path')
        .attr('d', 'M 0,-5 L 10 ,0 L 0,5')
        .style('fill', "#999" );

    var simulation222 = d3.forceSimulation()
        .force("link", d3.forceLink().id(function (d) {return d.id;}).distance(100).strength(1))
        .force("charge", d3.forceManyBody())
        .force("center", d3.forceCenter(width / 2, height / 2));

var div = d3.select('body').append('div')   
    .attr('class', 'tooltip')               
    .style('opacity', 0);
	
	
    d3.json("graph222.json", function (error, graph) {
	
        if (error) throw error;
        update(graph.links, graph.nodes);
		
		
    });
	
	update(graph.links, graph.nodes);
setTimeout(function(){force.alpha(0.1);},1000);

    function update(links, nodes) {
        link = svg222.selectAll(".link")
            .data(links)
            .enter()
            .append("line")
            .attr("class", "link")
            .attr('marker-end','url(#arrowhead)')
			.style("stroke-width","1")
      .style("stroke", function(d) { return colors(d.value); })

        link.append("title")
            .text(function (d) {return d.type;});

        edgepaths = svg222.selectAll(".edgepath")
            .data(links)
            .enter()
            .append('path')
            .attrs({
                'class': 'edgepath',
                'fill-opacity': 0,
                'stroke-opacity': 0,
				
                'id': function (d, i) {return 'edgepath' + i}
            })
            .style("pointer-events", "none")
		
       ;

        edgelabels = svg222.selectAll(".edgelabel")
            .data(links)
            .enter()
            .append('text')
			
            .style("fill", function(d) { return colors(d.value); })
            .attrs({
                'class': 'edgelabel',
                'id': function (d, i) {return 'edgelabel' + i},
                'font-size': 15,
				'font-family': "Arial",
               
            });

        edgelabels.append('textPath')
            .attr('xlink:href', function (d, i) {return '#edgepath' + i})
            .style("text-anchor", "middle")
            .style("pointer-events", "none")
            .attr("startOffset", "50%")
        ;
			
				
				var data = [{"label":"is a", "value":194},
        {"label":"part of", "value":567},
        {"label":"adjacent to", "value":1314},
        {"label":"located in", "value":793},
        {"label":"has part", "value":1929},
        {"label":"part of", "value":1383}];
		
			var legend = d3.select("#container222").append("svg")
    .attr("class", "legend")
    .attr("width", 140)
    .attr("height", 400)
    .selectAll("g")
	.data(colors.domain()) 
    .enter()
    .append("g")
    .attr("transform", function(d, i) {
      return "translate(0," + i * 20 + ")";
    });
  legend.append("rect")
 
    .attr("width", 18)
    .attr("height", 2)
    .style('fill', colors)                                   // NEW
    .style('stroke', colors); 
	
	
  legend.append("text")
    .data(data)
    .attr("x", 24)
    .attr("y", 12)
   
    .text(function(d) {
       {return d.label;}
    });

        node = svg222.selectAll(".node")
            .data(nodes)
            .enter()
            .append("g")
            .attr("class", "node")
            .call(d3.drag()
                    .on("start", dragstarted)
                    .on("drag", dragged)
                    //.on("end", dragended)
            )
			.on("tick", ticked)
			.on("click", click)
      .on("dblclick", dblclick)
	  
	  .on('mouseover', function(d) {      
        div.transition()        
            .duration(200)      
            .style('opacity', .9);      
			if (d.id == 1) 
        div.html('<h3>' + d.name + '</h3>' + '<p>' + "An intentional planting of trees or shrubs maintained for food, typically fruit, production." +  '</p>')  
            .style('left', (d3.event.pageX ) + 'px')     
            .style('top', (d3.event.pageY + 58) + 'px')
			else
			div.html('<p>' + d.name + '</p>' )  
            .style('left', (d3.event.pageX ) + 'px')     
            .style('top', (d3.event.pageY + 58) + 'px')

			
        
		})                  
    .on('mouseout', function(d) {       
        div.transition()        
            .duration(500)      
            .style('opacity', 0);   
    });

        node.append("circle")
            .attr("r", 7)
            .style("fill", function (d, i) {
			
			if (i>0) {return colors(d.value)}
			else { return '#ff9966'}
			})
			

        node.append("text")
            .attr("dy", -3)
            .text(function (d) {return d.name})
			.attr('font-size',  function(d, i) {
        if (i>0) { return '1.2em' }
        else { return '1.8em'}
    }
	)			;

        simulation222
            .nodes(nodes)
            .on("tick", ticked);

        simulation222.force("link")
            .links(links);
    }
	
	

    function ticked() {
        link
            .attr("x1", function (d) {return d.source.x;})
            .attr("y1", function (d) {return d.source.y;})
            .attr("x2", function (d) {return d.target.x;})
            .attr("y2", function (d) {return d.target.y;});

        node
            .attr("transform", function (d) {return "translate(" + d.x + ", " + d.y + ")";});

        edgepaths.attr('d', function (d) {
            return 'M ' + d.source.x + ' ' + d.source.y + ' L ' + d.target.x + ' ' + d.target.y;
        });

        edgelabels.attr('transform', function (d) {
            if (d.target.x < d.source.x) {
                var bbox = this.getBBox();

                rx = bbox.x + bbox.width / 2;
                ry = bbox.y + bbox.height / 2;
                return 'rotate(180 ' + rx + ' ' + ry + ')';
            }
            else {
                return 'rotate(0)';
            }
        });
    }

    function dragstarted(d) {
        if (!d3.event.active) simulation222.alphaTarget(0.3).restart()
        d.fx = d.x;
        d.fy = d.y;
    }

    function dragged(d) {
        d.fx = d3.event.x;
        d.fy = d3.event.y;
    }
	
	
	// action to take on mouse click
function click() {
  d3.select(this).select("text").transition()
    .duration(750)
    .attr("x", 22)
    .style("stroke", "lightsteelblue")
    .style("stroke-width", ".5px")
    .style("font", "20px ");
  d3.select(this).select("circle").transition()
    .duration(750)
    .attr("r", 14);
}

// action to take on mouse double click
function dblclick() {
  d3.select(this).select("circle").transition()
    .duration(750)
    .attr("r", 6);
  d3.select(this).select("text").transition()
    .duration(750)
    .attr("x", 12)
    .style("stroke", "none")
    .style("fill", "black")
    .style("stroke", "none")
    .style("font", "15px ");
}
}
else if (layer.id === 'duo') {
	  
	  document.getElementById('container243').style.display ='block';
	  document.getElementById('container323').style.display ='none';
	  document.getElementById('container222').style.display ='none';
	  document.getElementById('container242').style.display ='none';
	  document.getElementById('container324').style.display ='none';
	  document.getElementById('container334').style.display ='none';
	  document.getElementById('container211').style.display ='none';
	  document.getElementById('container131').style.display ='none';
	  document.getElementById('container112').style.display ='none';
	  document.getElementById('container321').style.display ='none';
	   document.getElementById('container1').style.display ='none';
	  var colors = d3.scaleOrdinal(d3.schemeCategory10);

    var svg243 = d3.select("#container243").select("svg"),
        width = +svg243.attr("width"),
        height = +svg243.attr("height"),
        node,
        link;

    svg243.append('defs').append('marker')
        .attrs({'id':'arrowhead',
            'viewBox':'-0 -5 10 10',
            'refX':13,
            'refY':0,
            'orient':'auto',
            'markerWidth':10,
            'markerHeight':	10,
            'xoverflow':'visible'})
        .append('svg:path')
        .attr('d', 'M 0,-5 L 10 ,0 L 0,5')
        .style('fill', "#999" );

    var simulation243 = d3.forceSimulation()
        .force("link", d3.forceLink().id(function (d) {return d.id;}).distance(100).strength(1))
        .force("charge", d3.forceManyBody())
        .force("center", d3.forceCenter(width / 2, height / 2));

var div = d3.select('body').append('div')   
    .attr('class', 'tooltip')               
    .style('opacity', 0);
	
	
    d3.json("graph243.json", function (error, graph) {
	
        if (error) throw error;
        update(graph.links, graph.nodes);
		
		
    });
	
	
	update(graph.links, graph.nodes);
setTimeout(function(){force.alpha(0.1);},1000);

    function update(links, nodes) {
        link = svg243.selectAll(".link")
            .data(links)
            .enter()
            .append("line")
            .attr("class", "link")
            .attr('marker-end','url(#arrowhead)')
			.style("stroke-width","1")
      .style("stroke", function(d) { return colors(d.value); })

        link.append("title")
            .text(function (d) {return d.type;});

        edgepaths = svg243.selectAll(".edgepath")
            .data(links)
            .enter()
            .append('path')
            .attrs({
                'class': 'edgepath',
                'fill-opacity': 0,
                'stroke-opacity': 0,
				
                'id': function (d, i) {return 'edgepath' + i}
            })
            .style("pointer-events", "none")
		
       ;

        edgelabels = svg243.selectAll(".edgelabel")
            .data(links)
            .enter()
            .append('text')
			
            .style("fill", function(d) { return colors(d.value); })
            .attrs({
                'class': 'edgelabel',
                'id': function (d, i) {return 'edgelabel' + i},
                'font-size': 15,
				'font-family': "Arial",
               
            });

        edgelabels.append('textPath')
            .attr('xlink:href', function (d, i) {return '#edgepath' + i})
            .style("text-anchor", "middle")
            .style("pointer-events", "none")
            .attr("startOffset", "50%")
           ;
			
						
				var data = [{"label":"is a", "value":194},
        {"label":"part of", "value":567},
        {"label":"adjacent to", "value":1314},
        {"label":"located in", "value":793},
        {"label":"has part", "value":1929},
        {"label":"part of", "value":1383}];
		
			var legend = d3.select("#container243").append("svg")
    .attr("class", "legend")
    .attr("width", 140)
    .attr("height", 400)
    .selectAll("g")
	.data(colors.domain()) 
    .enter()
    .append("g")
    .attr("transform", function(d, i) {
      return "translate(0," + i * 20 + ")";
    });
  legend.append("rect")
 
    .attr("width", 18)
    .attr("height", 2)
    .style('fill', colors)                                   // NEW
    .style('stroke', colors); 
	
	
  legend.append("text")
    .data(data)
    .attr("x", 24)
    .attr("y", 12)
   
    .text(function(d) {
       {return d.label;}
    });


        node = svg243.selectAll(".node")
            .data(nodes)
            .enter()
            .append("g")
            .attr("class", "node")
            .call(d3.drag()
                    .on("start", dragstarted)
                    .on("drag", dragged)
                    //.on("end", dragended)
            )
			.on("tick", ticked)
			.on("click", click)
      .on("dblclick", dblclick)
	  
	  .on('mouseover', function(d) {      
        div.transition()        
            .duration(200)      
            .style('opacity', .9);      
			if (d.id == 1) 
        div.html('<h4>' + d.name + '</h4>' + '<p>' + "An area of a planet's surface which is partly covered either by annual crops and perennial woody crops or by actively tilled land. This area is in contact with an atmospheric column extending from the planetary boundary layer to the planet's exosphere with little to no physical obstruction." +  '</p>')  
            .style('left', (d3.event.pageX ) + 'px')     
            .style('top', (d3.event.pageY + 58) + 'px')
			else
			div.html('<p>' + d.name + '</p>' )  
            .style('left', (d3.event.pageX ) + 'px')     
            .style('top', (d3.event.pageY + 58) + 'px')

			
        
		})                  
    .on('mouseout', function(d) {       
        div.transition()        
            .duration(500)      
            .style('opacity', 0);   
    });

        node.append("circle")
            .attr("r", 7)
            .style("fill", function (d, i) {
			
			if (i>0) {return colors(d.value)}
			else { return '#e6cc4d'}
			})
			

        node.append("text")
            .attr("dy", -3)
            .text(function (d) {return d.name})
			.attr('font-size',  function(d, i) {
        if (i>0) { return '1.2em' }
        else { return '1.8em'}
    }
	)			;

        simulation243
            .nodes(nodes)
            .on("tick", ticked);

        simulation243.force("link")
            .links(links);
    }
	
	

    function ticked() {
        link
            .attr("x1", function (d) {return d.source.x;})
            .attr("y1", function (d) {return d.source.y;})
            .attr("x2", function (d) {return d.target.x;})
            .attr("y2", function (d) {return d.target.y;});

        node
            .attr("transform", function (d) {return "translate(" + d.x + ", " + d.y + ")";});

        edgepaths.attr('d', function (d) {
            return 'M ' + d.source.x + ' ' + d.source.y + ' L ' + d.target.x + ' ' + d.target.y;
        });

        edgelabels.attr('transform', function (d) {
            if (d.target.x < d.source.x) {
                var bbox = this.getBBox();

                rx = bbox.x + bbox.width / 2;
                ry = bbox.y + bbox.height / 2;
                return 'rotate(180 ' + rx + ' ' + ry + ')';
            }
            else {
                return 'rotate(0)';
            }
        });
    }

    function dragstarted(d) {
        if (!d3.event.active) simulation243.alphaTarget(0.3).restart()
        d.fx = d.x;
        d.fy = d.y;
    }

    function dragged(d) {
        d.fx = d3.event.x;
        d.fy = d3.event.y;
    }
	
	
	// action to take on mouse click
function click() {
  d3.select(this).select("text").transition()
    .duration(750)
    .attr("x", 22)
    .style("stroke", "lightsteelblue")
    .style("stroke-width", ".5px")
    .style("font", "20px ");
  d3.select(this).select("circle").transition()
    .duration(750)
    .attr("r", 14);
}

// action to take on mouse double click
function dblclick() {
  d3.select(this).select("circle").transition()
    .duration(750)
    .attr("r", 6);
  d3.select(this).select("text").transition()
    .duration(750)
    .attr("x", 12)
    .style("stroke", "none")
    .style("fill", "black")
    .style("stroke", "none")
    .style("font", "15px ");
}
}
else if (layer.id === 'tria') {
	 
	  document.getElementById('container323').style.display ='block';
	  document.getElementById('container243').style.display ='none';
	  document.getElementById('container222').style.display ='none';
	  document.getElementById('container242').style.display ='none';
	  document.getElementById('container324').style.display ='none';
	  document.getElementById('container334').style.display ='none';
	  document.getElementById('container211').style.display ='none';
	  document.getElementById('container131').style.display ='none';
	  document.getElementById('container112').style.display ='none';
	  document.getElementById('container321').style.display ='none';
	   document.getElementById('container1').style.display ='none';
	  var colors = d3.scaleOrdinal(d3.schemeCategory10);

    var svg323 = d3.select("#container323").select("svg"),
        width = +svg323.attr("width"),
        height = +svg323.attr("height"),
        node,
        link;

    svg323.append('defs').append('marker')
        .attrs({'id':'arrowhead',
            'viewBox':'-0 -5 10 10',
            'refX':13,
            'refY':0,
            'orient':'auto',
            'markerWidth':10,
            'markerHeight':	10,
            'xoverflow':'visible'})
        .append('svg:path')
        .attr('d', 'M 0,-5 L 10 ,0 L 0,5')
        .style('fill', "#999" )
		;

    var simulation323 = d3.forceSimulation()
        .force("link", d3.forceLink().id(function (d) {return d.id;}).distance(100).strength(1))
        .force("charge", d3.forceManyBody())
        .force("center", d3.forceCenter(width / 2, height / 2));

var div = d3.select('body').append('div')   
    .attr('class', 'tooltip')               
    .style('opacity', 0);
	
	
    d3.json("graph323.json", function (error, graph) {
	
        if (error) throw error;
        update(graph.links, graph.nodes);
		
		
    });
	
		update(graph.links, graph.nodes);
setInterval(function(){force.alpha(0.1);},250);

    function update(links, nodes) {
        link = svg323.selectAll(".link")
            .data(links)
            .enter()
            .append("line")
            .attr("class", "link")
            .attr('marker-end','url(#arrowhead)')
			.style("stroke-width","1")
      .style("stroke", function(d) { return colors(d.value); })

        link.append("title")
            .text(function (d) {return d.type;});

        edgepaths = svg323.selectAll(".edgepath")
            .data(links)
            .enter()
            .append('path')
            .attrs({
                'class': 'edgepath',
                'fill-opacity': 0,
                'stroke-opacity': 0,
				
                'id': function (d, i) {return 'edgepath' + i}
            })
            .style("pointer-events", "none")
		
       ;

        edgelabels = svg323.selectAll(".edgelabel")
            .data(links)
            .enter()
            .append('text')
			
            .style("fill", function(d) { return colors(d.value); })
            .attrs({
                'class': 'edgelabel',
                'id': function (d, i) {return 'edgelabel' + i},
                'font-size': 15,
				'font-family': "Arial",
               
            });

        edgelabels.append('textPath')
            .attr('xlink:href', function (d, i) {return '#edgepath' + i})
            .style("text-anchor", "middle")
            .style("pointer-events", "none")
            .attr("startOffset", "50%")
           ;
			
							
				var data = [{"label":"is a", "value":194},
        {"label":"occurs in", "value":567},
        {"label":"adjacent to", "value":1314},
        {"label":"located in", "value":793},
        {"label":"has part", "value":1929},
        {"label":"part of", "value":1383}];
		
			var legend = d3.select("#container323").append("svg")
    .attr("class", "legend")
    .attr("width", 140)
    .attr("height", 400)
    .selectAll("g")
	.data(colors.domain()) 
    .enter()
    .append("g")
    .attr("transform", function(d, i) {
      return "translate(0," + i * 20 + ")";
    });
  legend.append("rect")
 
    .attr("width", 18)
    .attr("height", 2)
    .style('fill', colors)                                   // NEW
    .style('stroke', colors); 
	
	
  legend.append("text")
    .data(data)
    .attr("x", 24)
    .attr("y", 12)
   
    .text(function(d) {
       {return d.label;}
    });

        node = svg323.selectAll(".node")
            .data(nodes)
            .enter()
            .append("g")
            .attr("class", "node")
            .call(d3.drag()
                    .on("start", dragstarted)
                    .on("drag", dragged)
                    //.on("end", dragended)
            )
			.on("tick", ticked)
			.on("click", click)
      .on("dblclick", dblclick)
	  
	  .on('mouseover', function(d) {      
        div.transition()        
            .duration(200)      
            .style('opacity', .9);      
			if (d.id == 1) 
        div.html('<h3>' + d.name + '</h3>' + '<p>' + "A vegetated area which has not been cleared or is sparsely settled, usually scrub-covered or forested." +  '</p>')  
            .style('left', (d3.event.pageX ) + 'px')     
            .style('top', (d3.event.pageY + 58) + 'px')
			else
			div.html('<p>' + d.name + '</p>' )  
            .style('left', (d3.event.pageX ) + 'px')     
            .style('top', (d3.event.pageY + 58) + 'px')

			
        
		})                  
    .on('mouseout', function(d) {       
        div.transition()        
            .duration(500)      
            .style('opacity', 0);   
    });

        node.append("circle")
            .attr("r", 7)
            .style("fill", function (d, i) {
			
			if (i>0) {return colors(d.value)}
			else { return '#66FF00'}
			})
			

        node.append("text")
            .attr("dy", -3)
            .text(function (d) {return d.name})
			.attr('font-size',  function(d, i) {
        if (i>0) { return '1.2em' }
        else { return '1.8em'}
    }
	)			;

        simulation323
            .nodes(nodes)
            .on("tick", ticked);

        simulation323.force("link")
            .links(links);
    }
	
	

    function ticked() {
        link
            .attr("x1", function (d) {return d.source.x;})
            .attr("y1", function (d) {return d.source.y;})
            .attr("x2", function (d) {return d.target.x;})
            .attr("y2", function (d) {return d.target.y;});

        node
            .attr("transform", function (d) {return "translate(" + d.x + ", " + d.y + ")";});

        edgepaths.attr('d', function (d) {
            return 'M ' + d.source.x + ' ' + d.source.y + ' L ' + d.target.x + ' ' + d.target.y;
        });

        edgelabels.attr('transform', function (d) {
            if (d.target.x < d.source.x) {
                var bbox = this.getBBox();

                rx = bbox.x + bbox.width / 2;
                ry = bbox.y + bbox.height / 2;
                return 'rotate(180 ' + rx + ' ' + ry + ')';
            }
            else {
                return 'rotate(0)';
            }
        });
    }

    function dragstarted(d) {
        if (!d3.event.active) simulation323.alphaTarget(0.3).restart()
        d.fx = d.x;
        d.fy = d.y;
    }

    function dragged(d) {
        d.fx = d3.event.x;
        d.fy = d3.event.y;
    }
	
	
	// action to take on mouse click
function click() {
  d3.select(this).select("text").transition()
    .duration(750)
    .attr("x", 22)
    .style("stroke", "lightsteelblue")
    .style("stroke-width", ".5px")
    .style("font", "20px ");
  d3.select(this).select("circle").transition()
    .duration(750)
    .attr("r", 14);
}

// action to take on mouse double click
function dblclick() {
  d3.select(this).select("circle").transition()
    .duration(750)
    .attr("r", 6);
  d3.select(this).select("text").transition()
    .duration(750)
    .attr("x", 12)
    .style("stroke", "none")
    .style("fill", "black")
    .style("stroke", "none")
    .style("font", "15px ");
}
}
    else {
	  document.getElementById('container323').style.display ='none';
	  document.getElementById('container243').style.display ='none';
	  document.getElementById('container222').style.display ='none';
	  document.getElementById('container242').style.display ='none';
	  document.getElementById('container324').style.display ='none';
	  document.getElementById('container334').style.display ='none';
	  document.getElementById('container211').style.display ='none';
	  document.getElementById('container131').style.display ='none';
	  document.getElementById('container112').style.display ='none';
	  document.getElementById('container321').style.display ='none';
	   document.getElementById('container1').style.display ='none';
}

  });
});



 var baseTree = [
            {
                label: 'OpenStreeMap ',
                layer: osm,

            },
        ];
		
	var overlaysTree = {
            label: 'Landcover',
            selectAllCheckbox: 'Un/select all',
            children: [
                    {label: "Rivers <img src='hydro1.png' />", layer: hydro},
                    {label: "Grassland area <img src='fus_voskotopoi.PNG' />", layer: landusegeo1},
					{label: "Area of cropland <img src='gi_poukaliptetai_apo_georgia.PNG' />  ", layer: landusegeo2},
					{label: "Bush area <img src='sklirofiliki_vlastisi.PNG' />", layer: landusegeo3},
					{label: "Woodland biome  <img src='metavatikes_daswdeis.PNG' />", layer: landusegeo4},
					{label: "Chaparral area <img src='apotefrwmenes_ektaseis.PNG' />", layer: landusegeo5},
					{label: "Area of developed space <img src='diakekomeni_astiki.PNG' /> ", layer: landusegeo6},
					{label: "Quarry <img src='xoroi_eksoriksis_oriktwn.PNG' />", layer: landusegeo7},
					{label: "Arable land <img src='mi_ardeusimi_arogimi_gi.PNG' /> ", layer: landusegeo8},
                    {label: "Orchard <img src='oporofora_dentra.PNG' />",  layer: landusegeo9},
                    {label: "Arable or pasturable land <img src='suntheta_sustimata_kaliergeias.PNG' />", layer: landusegeo10},
                ],

            
        }	

info = L.control.layers.tree(baseTree, overlaysTree).addTo(mymap);

		
		
//    function dragended(d) {
//        if (!d3.event.active) simulation1.alphaTarget(0);
//        d.fx = undefined;
//        d.fy = undefined;
//    }



</script>

</body>
</html>